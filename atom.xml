<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Rainer's blog]]></title>
  <link href="http://Robing.github.io/atom.xml" rel="self"/>
  <link href="http://Robing.github.io/"/>
  <updated>2014-05-19T09:02:10+08:00</updated>
  <id>http://Robing.github.io/</id>
  <author>
    <name><![CDATA[Robin]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Shadow DOM 301]]></title>
    <link href="http://Robing.github.io/blog/2014/05/16/shadow-dom-301/"/>
    <updated>2014-05-16T12:21:36+08:00</updated>
    <id>http://Robing.github.io/blog/2014/05/16/shadow-dom-301</id>
    <content type="html"><![CDATA[<div class="content" id="article-content">
<p>This article discusses more of the amazing things you can do with Shadow DOM! It builds on the concepts discussed in <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a>
and <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom-201/">Shadow DOM 201</a>.</p>
<p class="tip notice">In Chrome, turn on the &#8220;Enable experimental Web Platform features&#8221; in about:flags to experiment with everything covered in this article.</p>

<h2 id="toc-shadow-multiple">Using multiple shadow roots</h2>

<p>If you&#8217;re hosting a party, it gets stuffy if everyone is crammed into the same room.
You want the option of distributing groups of people across multiple rooms. Elements hosting
Shadow DOM can do this too, that is to say, they can host more than one shadow
root at a time.</p>
<p>Let&#8217;s see what happens if we try to attach multiple shadow roots to a host:</p>
<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"example1"</span><span class="tag">&gt;</span><span class="pln">Light DOM</span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> container </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#example1'</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root1 </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root2 </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
root1</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;div&gt;Root 1 FTW&lt;/div&gt;'</span><span class="pun">;</span><span class="pln">
root2</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;div&gt;Root 2 FTW&lt;/div&gt;'</span><span class="pun">;</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></pre>

<div class="demodevtools"> 
<img src="http://rainer.qiniudn.com/stacking.png" title="Attaching multiple shadow trees" alt="Attaching multiple shadow trees" style="width:250px;">
</div>

<div class="demoarea">
  <div id="example1">Light DOM</div>
</div>

<script>
(function() {
var container = document.querySelector('#example1');
var root1 = container.createShadowRoot();
var root2 = container.createShadowRoot();
root1.innerHTML = '<div>Root 1 FTW</div>';
root2.innerHTML = '<div>Root 2 FTW</div>';
})();
</script>

<p class="notice tip">In the DevTools, turn on &#8220;Show Shadow DOM&#8221; to be
  able to inspect ShadowRoots.</p>

<p>What renders is &#8220;Root 2 FTW&#8221;, despite the fact that we had already attached a shadow tree.
This is because the last shadow tree added to a host, wins. It&#8217;s a LIFO stack as
far as rendering is concerned. Examining the DevTools verifies this behavior.</p>
<p class="notice fact">Shadow trees added to a host are stacked in the order they&#8217;re added,
starting with the most recent first. The last one added is the one that renders.</p>

<blockquote class="commentary talkinghead" id="youngest-tree">
The most recently added tree is called the <b>younger tree</b>. Previous trees are called <b>older trees</b>. In this example, <code>root2</code> is the younger tree and  <code>root1</code> is the older tree.
</blockquote>

<p>So what&#8217;s the point of using multiple shadows if only the last is invited to the
rendering party? Enter shadow insertion points.</p>
<h3 id="toc-shadow-insertion">Shadow Insertion Points</h3>

<!-- more -->

<p>&#8220;Shadow insertion points&#8221; (<code>&lt;shadow&gt;</code>) are similar to normal <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom/#toc-separation-separate">insertion points</a> (<code>&lt;content&gt;</code>) in that they&#8217;re placeholders. However, instead of being placeholders for a host&#8217;s <em>content</em>, they&#8217;re hosts for other <em>shadow trees</em>.
It&#8217;s Shadow DOM Inception!</p>
<p>As you can probably imagine, things get more complicated the further you drill down
the rabbit hole. For this reason, the spec is very clear about what happens when
multiple <code>&lt;shadow&gt;</code> elements are in play:</p>
<p class="notice fact">If multiple <code>&lt;shadow&gt;</code> insertion points exist
in a shadow tree, only the first is recognized. The rest are ignored.</p>

<p>Looking back to our original example, the first shadow <code>root1</code> got left off the
invite list. Adding a <code>&lt;shadow&gt;</code> insertion point brings it back:</p>
<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"example2"</span><span class="tag">&gt;</span><span class="pln">Light DOM</span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> container </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#example2'</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root1 </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root2 </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
root1</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;div&gt;Root 1 FTW&lt;/div&gt;&lt;content&gt;&lt;/content&gt;'</span><span class="pun">;</span><span class="pln">
</span><b><span class="pln">root2</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;div&gt;Root 2 FTW&lt;/div&gt;&lt;shadow&gt;&lt;/shadow&gt;'</span><span class="pun">;</span></b><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></pre>

<div class="demodevtools"> 
<img src="http://rainer.qiniudn.com/shadow-insertion-point.png" title="Shadow insertion points" alt="Shadow insertion points" style="width:250px;">
</div>

<div class="demoarea">
  <div id="example2">Light DOM</div>
</div>

<script>
(function() {
var container = document.querySelector('#example2');
var root1 = container.createShadowRoot();
var root2 = container.createShadowRoot();
root1.innerHTML = '<div>Root 1 FTW</div><content></content>';
root2.innerHTML = '<div>Root 2 FTW</div><shadow></shadow>';
})();
</script>

<p>There are a couple of interesting things about this example:</p>
<ol>
<li>&#8220;Root 2 FTW&#8221; still renders above &#8220;Root 1 FTW&#8221;. This is because of where we&#8217;ve placed
the <code>&lt;shadow&gt;</code> insertion point. If you want the reverse, move the insertion point: <code>root2.innerHTML = '&lt;shadow&gt;&lt;/shadow&gt;&lt;div&gt;Root 2 FTW&lt;/div&gt;';</code>.</li>
<li>Notice there&#8217;s now a <code>&lt;content&gt;</code> insertion point in root1. This makes
the text node &#8220;Light DOM&#8221; come along for the rendering ride.</li>
</ol>
<p><b id="toc-shadow-older">What&#8217;s rendered at &lt;shadow&gt;?</b></p>
<p>Sometimes it&#8217;s useful to know the older shadow tree being rendered at a <code>&lt;shadow&gt;</code>. You can get a reference to that tree through <code>.olderShadowRoot</code>:</p>
<pre class="prettyprint"><b><span class="pln">root2</span><span class="pun">.</span><span class="pln">olderShadowRoot</span></b><span class="pln"> </span><span class="pun">===</span><span class="pln"> root1 </span><span class="com">//true</span></pre>

<h2 id="toc-get-shadowroot">Obtaining a host&#8217;s shadow root</h2>

<p>If an element is hosting Shadow DOM you can access its <a href="#youngest-tree">youngest shadow root</a>
using <code>.shadowRoot</code>:</p>
<pre class="prettyprint"><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> host</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">host</span><span class="pun">.</span><span class="pln">shadowRoot </span><span class="pun">===</span><span class="pln"> root</span><span class="pun">);</span><span class="pln"> </span><span class="com">// true</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">document</span><span class="pun">.</span><span class="pln">body</span><span class="pun">.</span><span class="pln">shadowRoot</span><span class="pun">);</span><span class="pln"> </span><span class="com">// null</span></pre>

<p>If you&#8217;re worried about people crossing into your shadows, redefine
 <code>.shadowRoot</code> to be null:</p>
<pre class="prettyprint"><span class="typ">Object</span><span class="pun">.</span><span class="pln">defineProperty</span><span class="pun">(</span><span class="pln">host</span><span class="pun">,</span><span class="pln"> </span><span class="str">'shadowRoot'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">get</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
  </span><span class="kwd">set</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">});</span></pre>

<p>A bit of a hack, but it works. In the end, it&#8217;s important to remember that while amazingly fantastic,
<strong>Shadow DOM has not been designed to be a security feature</strong>. Don&#8217;t rely on it for
complete content isolation.</p>
<h2 id="toc-creating-js">Building Shadow DOM in JS</h2>

<p>If you prefer building DOM in JS, <code>HTMLContentElement</code> and <code>HTMLShadowElement</code>
have interfaces for that.</p>
<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"example3"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;span&gt;</span><span class="pln">Light DOM</span><span class="tag">&lt;/span&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> container </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#example3'</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root1 </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root2 </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> div </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">);</span><span class="pln">
div</span><span class="pun">.</span><span class="pln">textContent </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Root 1 FTW'</span><span class="pun">;</span><span class="pln">
root1</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">div</span><span class="pun">);</span><span class="pln">

 </span><span class="com">// HTMLContentElement</span><span class="pln">
</span><b><span class="kwd">var</span><span class="pln"> content </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'content'</span><span class="pun">);</span><span class="pln">
content</span><span class="pun">.</span><span class="pln">select </span><span class="pun">=</span><span class="pln"> </span><span class="str">'span'</span><span class="pun">;</span></b><span class="pln"> </span><span class="com">// selects any spans the host node contains</span><span class="pln">
root1</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">content</span><span class="pun">);</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> div </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">);</span><span class="pln">
div</span><span class="pun">.</span><span class="pln">textContent </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Root 2 FTW'</span><span class="pun">;</span><span class="pln">
root2</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">div</span><span class="pun">);</span><span class="pln">

</span><span class="com">// HTMLShadowElement</span><span class="pln">
</span><b><span class="kwd">var</span><span class="pln"> shadow </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">createElement</span><span class="pun">(</span><span class="str">'shadow'</span><span class="pun">);</span></b><span class="pln">
root2</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">shadow</span><span class="pun">);</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></pre>

<p>This example is nearly identical to the one in the <a href="#toc-shadow-insertion">previous section</a>.
The only difference is that now I&#8217;m using <code>select</code> to pull out the newly added <code>&lt;span&gt;</code>.</p>
<h2 id="toc-distributed-nodes">Working with insertion points</h2>

<p>Nodes that are selected out of the host element and &#8220;distribute&#8221; into the shadow tree
are called&#8230;drumroll&#8230;distributed nodes! They&#8217;re allowed to cross the shadow boundary
when insertion points invite them in.</p>
<p>What&#8217;s conceptually bizarre about insertion points is that they don&#8217;t physically
move DOM. The host&#8217;s nodes stay intact. Insertion points merely re-project nodes
from the host into the shadow tree. It&#8217;s a presentation/rendering thing: <s>&#8220;Move these nodes over here&#8221;</s> &#8220;Render these nodes at this location.&#8221;</p>
<p class="notice fact">You cannot traverse the DOM into a <code>&lt;content&gt;</code>.</p>

<p>For example:</p>
<pre class="prettyprint"><span class="tag">&lt;div&gt;&lt;h2&gt;</span><span class="pln">Light DOM</span><span class="tag">&lt;/h2&gt;&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">).</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
root</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;content select="h2"&gt;&lt;/content&gt;'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> h2 </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'h2'</span><span class="pun">);</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">root</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'content[select="h2"] h2'</span><span class="pun">));</span><span class="pln"> </span><span class="com">// null;</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">root</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'content'</span><span class="pun">).</span><span class="pln">contains</span><span class="pun">(</span><span class="pln">h2</span><span class="pun">));</span><span class="pln"> </span><span class="com">// false</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></pre>

<p>Voil√†! The <code>h2</code> isn&#8217;t a child of the shadow DOM. This leads to another tid bit:</p>
<blockquote class="commentary talkinghead">
Insertion points are incredibly powerful. Think of them as a way to create a
&#8220;declarative API&#8221; for your Shadow DOM. A host element can include all the markup in the world,
but unless I invite it into my Shadow DOM with an insertion point, it&#8217;s meaningless.
</blockquote>

<h3 id="toc-getDistributedNodes">Element.getDistributedNodes()</h3>

<p>We can&#8217;t traverse into a <code>&lt;content&gt;</code>, but the <code>.getDistributedNodes()</code> API
allows us to query the distributed nodes at an insertion point:</p>
<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"example4"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;h2&gt;</span><span class="pln">Eric</span><span class="tag">&lt;/h2&gt;</span><span class="pln">
  </span><span class="tag">&lt;h2&gt;</span><span class="pln">Bidelman</span><span class="tag">&lt;/h2&gt;</span><span class="pln">
  </span><span class="tag">&lt;div&gt;</span><span class="pln">Digital Jedi</span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;h4&gt;</span><span class="pln">footer text</span><span class="tag">&lt;/h4&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span><span class="pln">

</span><span class="tag">&lt;template</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"sdom"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;header&gt;</span><span class="pln">
    </span><span class="tag">&lt;content</span><span class="pln"> </span><span class="atn">select</span><span class="pun">=</span><span class="atv">"h2"</span><span class="tag">&gt;&lt;/content&gt;</span><span class="pln">
  </span><span class="tag">&lt;/header&gt;</span><span class="pln">
  </span><span class="tag">&lt;section&gt;</span><span class="pln">
    </span><span class="tag">&lt;content</span><span class="pln"> </span><span class="atn">select</span><span class="pun">=</span><span class="atv">"div"</span><span class="tag">&gt;&lt;/content&gt;</span><span class="pln">
  </span><span class="tag">&lt;/section&gt;</span><span class="pln">
  </span><span class="tag">&lt;footer&gt;</span><span class="pln">
    </span><span class="tag">&lt;content</span><span class="pln"> </span><span class="atn">select</span><span class="pun">=</span><span class="atv">"h4:first-of-type"</span><span class="tag">&gt;&lt;/content&gt;</span><span class="pln">
  </span><span class="tag">&lt;/footer&gt;</span><span class="pln">
</span><span class="tag">&lt;/template&gt;</span><span class="pln">

</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> container </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#example4'</span><span class="pun">);</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> t </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#sdom'</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> clone </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">importNode</span><span class="pun">(</span><span class="pln">t</span><span class="pun">.</span><span class="pln">content</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">);</span><span class="pln">
root</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">clone</span><span class="pun">);</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> html </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span><span class="pln">
</span><span class="pun">[].</span><span class="pln">forEach</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">root</span><span class="pun">.</span><span class="pln">querySelectorAll</span><span class="pun">(</span><span class="str">'content'</span><span class="pun">),</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">el</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  html</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">el</span><span class="pun">.</span><span class="pln">outerHTML </span><span class="pun">+</span><span class="pln"> </span><span class="str">': '</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> nodes </span><span class="pun">=</span><span class="pln"> el</span><span class="pun">.</span><span class="pln">getDistributedNodes</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">[].</span><span class="pln">forEach</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">nodes</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">node</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    html</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">outerHTML</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
  html</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="str">'\n'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></pre>

<div id="example4" style="display:none">
  <h2>Eric</h2>
  <h2>Bidelman</h2>
  <div>Digital Jedi</div>
  <h4>footer text</h4>
</div>

<p><template id="sdom">
  <header>
    <content select="h2"></content>
  </header>
  <section>
    <content select="div"></content>
  </section>
  <footer>
    <content select="h4:first-of-type"></content>
  </footer>
</template></p>
<div id="example4-log" class="demoarea">
 <textarea readonly=""></textarea>
</div>

<script>
(function() {
if ('HTMLTemplateElement' in window) {
  var container = document.querySelector('#example4');

  var root1 = container.createShadowRoot();
  var t = document.querySelector('#sdom');
  var clone = document.importNode(t.content, true);
  root1.appendChild(clone);

  var html = [];
  [].forEach.call(root1.querySelectorAll('content'), function(el) {
    html.push(el.outerHTML + ': ');
    var nodes = el.getDistributedNodes();
    [].forEach.call(nodes, function(node) {
      html.push(node.outerHTML);
    });
    html.push('\n');
  });

  document.querySelector('#example4-log textarea').value = html.join('');
}
})();
</script>

<h3 id="toc-getDestinationInsertionPoints">Element.getDestinationInsertionPoints()</h3>

<p>Similar to <code>.getDistributedNodes()</code>, you can check what insertion points
a node is distributed into by calling its <code>.getDestinationInsertionPoints()</code>:</p>
<pre class="prettyprint"><code><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"host"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;h2&gt;</span><span class="pln">Light DOM</span><span class="tag">&lt;/h2&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span><span class="pln">

</span><span class="tag">&lt;script&gt;</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> host </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">);</span><span class="pln">

  </span><span class="kwd">var</span><span class="pln"> root1 </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> root2 </span><span class="pun">=</span><span class="pln"> container</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
  root1</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;content select="h2"&gt;&lt;/content&gt;'</span><span class="pun">;</span><span class="pln">
  root2</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;shadow&gt;&lt;/shadow&gt;'</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">var</span><span class="pln"> h2 </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#host h2'</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> insertionPoints </span><span class="pun">=</span><span class="pln"> h2</span><span class="pun">.</span><span class="pln">getDestinationInsertionPoints</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">[].</span><span class="pln">forEach</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">insertionPoints</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">contentEl</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln">contentEl</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></code></pre>
<div id="example5-gip" style="display:none">
  <h2>Light DOM</h2>
</div>

<div id="example5-getDestInsertinoPoints" class="demoarea">
 <textarea readonly=""></textarea>
</div>

<script>
(function() {
if (!!Element.prototype.getDestinationInsertionPoints) { 
  var container = document.querySelector('#example5-gip');
  var h2 = container.querySelector('h2');

  var root1 = container.createShadowRoot();
  var root2 = container.createShadowRoot();
  root1.innerHTML = '<content select="h2"></content>';
  root2.innerHTML = '<shadow></shadow>';

  var html = [];
  var insertionPoints = h2.getDestinationInsertionPoints();
  [].forEach.call(insertionPoints, function(contentEl) {
    html.push(contentEl.outerHTML);
    html.push('\n');
  });

  document.querySelector('#example5-getDestInsertinoPoints textarea').value = html.join('');
}
})();
</script>

<h2 id="toc-shadow-visualizder">Tool: Shadow DOM Visualizer</h2>

<p>Understanding the black magic that is Shadow DOM is difficult. I remember trying
to wrap my head around it for the first time.</p>
<p>To help visualize how Shadow DOM rendering works, I&#8217;ve built a tool
using <a href="http://d3js.org/">d3.js</a>. Both markup boxes on the left-hand side are
editable. Feel free to paste in your own markup and play around to see how things
work and insertion points swizzle host nodes into the shadow tree.</p>
<figure>
<a href="http://html5-demos.appspot.com/static/shadowdom-visualizer/index.html"><img src="http://rainer.qiniudn.com/visualizer.png" title="Shadow DOM Visualizer" alt="Shadow DOM Visualizer"></a>
<figcaption><a href="http://html5-demos.appspot.com/static/shadowdom-visualizer/index.html">Launch Shadow DOM Visualizer</a></figcaption>
</figure>

<p>
<iframe width="420" height="315" src="http://www.youtube.com/embed/qnJ_s58ubxg" frameborder="0" allowfullscreen=""></iframe>
</p>

<p>Give it a try and let me know what you think!</p>
<h2 id="toc-events">Event Model</h2>

<p>Some events cross the shadow boundary and some do not. In the cases where events
cross the boundary, the event target is adjusted in order to maintain the
encapsulation that the shadow root&#8217;s upper boundary provides. That is, <strong>events
are retargeted to look like they&#8217;ve come from the host element rather than internal
elements to the Shadow DOM</strong>.</p>
<p class="tip notice">Access <code>event.path</code> to see the adjusted event path.</p>

<p>If your browser supports Shadow DOM (it does<span class="featuresupported no">n&#8217;t</span>),
you should see a play area below that helps visualize events. Elements in <span style="color:#ffcc00">yellow</span> are part of the Shadow DOM&#8217;s markup. Elements in <span style="color:steelblue">blue</span> are
part of the host element. The <span style="color:#ffcc00">yellow</span> border
around &#8220;I&#8217;m a node in the host&#8221; signifies that it is a distributed node, passing
through the shadow&#8217;s <code>&lt;content&gt;</code> insertion point.</p>
<p>The &#8220;Play Action&#8221; buttons show you different things to try. Give them a go to see
how the <code>mouseout</code> and <code>focusin</code> events bubble up to the main page.</p>
<div id="example5" class="demoarea">
  <div data-host="">
    <div class="blue">I&#8217;m a node in the host</div>
  </div>

  <template style="display:none;"> <!-- display:none used for older browsers -->
    <style>
    .scopestyleforolderbrowsers * {
      border: 4px solid #FC0;
    }
    .scopestyleforolderbrowsers input {
      padding: 5px;
    }
    .scopestyleforolderbrowsers div {
      background: #FC0;
      padding: 5px;
      border-radius: 3px;
      margin: 5px 0;
    }
    content::-webkit-distributed(*) {
      border: 4px solid #FC0;
    }
    ::content * {
      border: 4px solid #FC0;
    }
    </style>
    <section class="scopestyleforolderbrowsers">
      <div>I&#8217;m a node in Shadow DOM</div>
      <div>I&#8217;m a node in Shadow DOM</div>
      <content></content>
      <input type="text" placeholder="I'm in Shadow DOM">
      <div>I&#8217;m a node in Shadow DOM</div>
      <div>I&#8217;m a node in Shadow DOM</div>
    </section>
  </template>

  <aside class="cursor"></aside>

  <div class="buttons">
    <button data-action="playAnimation" data-action-idx="1">Play Action 1</button><br>
    <button data-action="playAnimation" data-action-idx="2">Play Action 2</button><br>
    <button data-action="playAnimation" data-action-idx="3">Play Action 3</button><br>
    <button data-action="clearLog">Clear log</button>
  </div>

  <output></output>
</div>

<script>
(function() {
function stringify(node) {
  return node.outerHTML.match(".*?>")[0].replace('<', '&lt;').replace('>', '&gt;');
}

var out = document.querySelector('#example5 output');
var host = document.querySelector('#example5 [data-host]');
var wrapper = document.querySelector('#example5');

var root = host.createShadowRoot();
root.innerHTML = document.querySelector('#example5 template').innerHTML;

host.addEventListener('mouseout', function(e) {

  out.innerHTML += [
    '<span>[' + e.type + ']</span>', 
    'on:', stringify(e.target) + ',', 
    'from', stringify(e.fromElement),
    '&rarr;', stringify(e.toElement), '<br>'].join(' ');
  out.scrollTop = out.scrollHeight;
});

document.addEventListener('focusin', function(e) {
  out.innerHTML += [
    '<span>[' + e.type + ']</span>',
    'on:', stringify(e.target), '<br>'].join(' ');
  out.scrollTop = out.scrollHeight;
});

function clearLog() {
  out.innerHTML = '';
}

function cleanUpAnimations(node) {
  [].forEach.call(node.classList, function(c) {
    if (c.indexOf('animation') == 0) {
      node.classList.remove(c);
    }
  });
}

function playAnimation(idx) {
  clearLog();
  wrapper.classList.add('playing');
  wrapper.classList.add('animation' + idx);
}

wrapper.addEventListener('webkitAnimationEnd', function(e) {
  this.classList.remove('playing');
  cleanUpAnimations(this);
});

wrapper.addEventListener('animationend', function(e) {
  this.classList.remove('playing');
  cleanUpAnimations(this);
});

document.querySelector('#example5 .buttons').addEventListener('click', function(e) {
  if (e.target.tagName == 'BUTTON') {
    switch(e.target.dataset.action) {
      case 'clearLog':
        clearLog();
        break;
      case 'playAnimation':
        cleanUpAnimations(wrapper);
        playAnimation(parseInt(e.target.dataset.actionIdx));
        break;
      default:
        break;
    }
  }
});

})();
</script>

<p><strong>Play Action 1</strong></p>
<ul>
<li>This one is interesting. You should see a <code>mouseout</code> from the host element (<code>&lt;div data-host&gt;</code>)
to the <span style="color:steelblue">blue</span> node. Even though it&#8217;s a distributed
node, it&#8217;s still in the host, not the ShadowDOM. Mousing further down into 
<span style="color:#ffcc00">yellow</span> again causes a <code>mouseout</code> on the <span style="color:steelblue">blue</span> node.</li>
</ul>
<p><strong>Play Action 2</strong></p>
<ul>
<li>There is one <code>mouseout</code> that appears on host (at the very end). Normally you&#8217;d
see <code>mouseout</code> events trigger for all of the <span style="color:#ffcc00">yellow</span> blocks.
However, in this case these elements are internal to the Shadow DOM and the event
doesn&#8217;t bubble through its upper boundary.</li>
</ul>
<p><strong>Play Action 3</strong></p>
<ul>
<li>Notice that when you click the input, the <code>focusin</code> doesn&#8217;t appear on the
input but on the host node itself. It&#8217;s been retargeted!</li>
</ul>
<h3 id="toc-events-stopped">Events that are always stopped</h3>

<p>The following events never cross the shadow boundary:</p>
<ul>
<li>abort</li>
<li>error</li>
<li>select</li>
<li>change</li>
<li>load</li>
<li>reset</li>
<li>resize</li>
<li>scroll</li>
<li>selectstart</li>
</ul>
<h2 id="toc-conclusion">Conclusion</h2>

<p>I hope you&#8217;ll agree that <strong>Shadow DOM is incredibly powerful</strong>. For the first time ever, we have proper encapsulation without the extra baggage of <code>&lt;iframe&gt;</code>s or other older techniques. </p>
<p>Shadow DOM is certainly complex beast, but it&#8217;s a beast worth adding to the web platform.
Spend some time with it. Learn it. Ask questions.</p>
<p>If you want to learn more, see Dominic&#8217;s intro article <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a>
and my <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom-201/">Shadow DOM 201: CSS &amp; Styling</a> article.</p>
<p class="small-notice">
Thanks to <a href="http://Robing.github.io/profiles/#dominiccooney">Dominic Cooney</a> and 
<a href="https://plus.google.com/111648463906387632236/posts">Dimitri Glazkov</a> for reviewing
the content of this tutorial.
</p><script>
document.addEventListener('DOMContentLoaded', function(e) {
  if (!isCompatible()) {
    document.body.classList.add('disabledemos');
    $('.featuresupported').removeClass('no');
  }
});
</script>

      </div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Shadow DOM 201]]></title>
    <link href="http://Robing.github.io/blog/2014/05/16/shadow-dom-201/"/>
    <updated>2014-05-16T12:16:18+08:00</updated>
    <id>http://Robing.github.io/blog/2014/05/16/shadow-dom-201</id>
    <content type="html"><![CDATA[<div class="content" id="article-content">

    <p>This article discusses more of the amazing things you can do with Shadow DOM. It builds on the concepts discussed in <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a>. If you&#8217;re looking for an introduction, see that article.</p>
    <h2 id="toc-intro">Introduction</h2>

    <p>Let&#8217;s face it. There&#8217;s nothing sexy about unstyled markup. Lucky for us, <a href="http://w3c.github.io/webcomponents/explainer/#acknowledgements">the brilliant folks behind Web Components</a>
        foresaw this and didn&#8217;t leave us hanging. The <a href="http://dev.w3.org/csswg/css-scoping/">CSS Scoping Module</a> defines many options for styling content in a shadow tree.</p>
    <p class="tip notice">In Chrome, turn on the &#8220;Enable experimental Web Platform features&#8221; in about:flags to experiment with everything covered in this article.</p>

    <h2 id="toc-style-scoped">Style encapsulation</h2>

    <p>One of the core features of Shadow DOM is the <a href="http://w3c.github.io/webcomponents/spec/shadow/#shadow-trees">shadow boundary</a>. It has a lot of nice properties, but one of the best is that it provides style encapsulation for free. Stated another way:</p>
    <p class="notice fact">CSS styles defined inside Shadow DOM are scoped to the ShadowRoot. This means styles are encapsulated by default.</p>

    <p>Below is an example. If all goes well and your browser supports Shadow DOM (it does
        <span class="featuresupported no">n&#8217;t</span>!), you&#8217;ll see &#8221;
        <span style="color:red">Shadow DOM</span>&#8221;.</p>
    <pre class="prettyprint"><code><span class="tag">&lt;div&gt;&lt;h3&gt;</span><span class="pln">Light DOM</span><span class="tag">&lt;/h3&gt;&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">).</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
root</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;style&gt;h3{ color: red; }&lt;/style&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
                 </span><span class="str">'&lt;h3&gt;Shadow DOM&lt;/h3&gt;'</span><span class="pun">;</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></code></pre>
    <div class="demoarea">
        <div id="style-ex-scoped">
            <h3>Light DOM</h3>
        </div>
    </div>

    <script>
    (function() {
        var container = document.querySelector('#style-ex-scoped');
        var root = container.createShadowRoot();
        root.innerHTML = '<style>h3{color: red;}</style><h3>Shadow DOM</h3>';
    })();
    </script>

    <p>There are two interesting observations about this demo:</p>
    <ul>
        <li>There are
            <a onclick=alertMsg() href="#">other h3s on this page</a>, but the only one that matches the h3 selector, and therefore styled red, is the one in the ShadowRoot. Again, scoped styles by default.</li>
        <li>Other styles rules defined on this page that target h3s don&#8217;t bleed into my content. That&#8217;s because
            <strong>selectors don&#8217;t cross the shadow boundary</strong>.</li>
    </ul>
    <script type="text/javascript">
    var alertMsg = function(msg){
        if(msg){
            alert(msg)
        }else{
            len = document.querySelectorAll('h3').length;
            msg = 'There are ' + len + ' <h3> on this page.';
            alert(msg);
        }
        return false;
    }
    </script>
    <p>Moral of the story? We have style encapsulation from the outside world. Thanks Shadow DOM!</p>
    <!-- more -->
    <h2 id="toc-style-host">Styling the host element</h2>

    <p>The
        <code>:host</code>allows you to select and style the element hosting a shadow tree:</p>
    <pre class="prettyprint"><code><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"red"</span><span class="tag">&gt;</span><span class="pln">My Button</span><span class="tag">&lt;/button&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> button </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'button'</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> button</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
root</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;style&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
    </span><span class="str">':host { text-transform: uppercase; }'</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
    </span><span class="str">'&lt;/style&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
    </span><span class="str">'&lt;content&gt;&lt;/content&gt;'</span><span class="pun">;</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></code></pre>
    <div class="demoarea">
        <button id="style-athost" class="red">My Button</button>
    </div>

    <script>
    (function() {
        var container = document.querySelector('#style-athost');
        var root = container.createShadowRoot();
        root.innerHTML = '<style>' +
            ':host { text-transform: uppercase; }' +
            '</style>' +
            '<content></content>';
    })();
    </script>

    <p>One gotcha is that rules in the parent page have higher specificity than
        <code>:host</code>
        rules defined in the element, but lower specificity than a
        <code>style</code>attribute defined on the host element. This allows users to override your styling from the outside.
        <code>:host</code>also only works in the context of a ShadowRoot so you can&#8217;t use it outside of Shadow DOM.</p>
    <p>The functional form of
        <code>:host(&lt;selector&gt;)</code>allows you to target the host element if it matches a
        <code>&lt;selector&gt;</code>.</p>
    <p>
        <strong>Example</strong>- match only if the element itself has the class
        <code>.different</code>(e.g..
        <code>&lt;x-foo class="different"&gt;&lt;/x-foo&gt;</code>):</p>
    <pre class="prettyprint"><code><span class="pun">:</span><span class="pln">host</span><span class="pun">(.</span><span class="pln">different</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">...</span><span class="pln">  
</span><span class="pun">}</span></code></pre>
    <h3 id="toc-style-states">Reacting to user states</h3>

    <p>A common use case for
        <code>:host</code>is when you&#8217;re creating a <a href="http://Robing.github.io/tutorials/webcomponents/customelements/">Custom Element</a> and want to react to different user states (:hover, :focus, :active, etc.).</p>
    <pre class="prettyprint"><code><span class="tag">&lt;style&gt;</span><span class="pln">
</span><span class="pun">:</span><span class="pln">host </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">opacity</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.4</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">transition</span><span class="pun">:</span><span class="pln"> opacity </span><span class="lit">420ms</span><span class="pln"> ease-in-out</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pun">:</span><span class="pln">host</span><span class="pun">(:</span><span class="pln">hover</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">opacity</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pun">:</span><span class="pln">host</span><span class="pun">(:</span><span class="pln">active</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">position</span><span class="pun">:</span><span class="pln"> relative</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">top</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3px</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">left</span><span class="pun">:</span><span class="pln"> </span><span class="lit">3px</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="tag">&lt;/style&gt;</span></code></pre>
    <div class="demoarea">
        <button id="style-athost-ex2">My Button</button>
    </div>

    <script>
    (function() {
        var container = document.querySelector('#style-athost-ex2');
        var root = container.createShadowRoot();
        root.innerHTML = '<style>\
      :host {\
        opacity: 0.4;\
        transition: opacity 200ms ease-in-out;\
      }\
      :host(:active) { position:relative;top:3px;left:3px; }\
      :host(:hover) {\
        opacity: 1;\
      }\
    }</style><content></content>';
    })();
    </script>

    <h3 id="toc-style-themeing">Theming an element</h3>

    <p>The
        <code>:host-context(&lt;selector&gt;)</code>pseudo class matches the host element if it or any of its ancestors matches
        <code>&lt;selector&gt;</code>.</p>
    <p>A common use of
        <code>:host-context()</code>is for theming an element based on its surrounds. For example, many people do theming by applying a class to
        <code>&lt;html&gt;</code>or
        <code>&lt;body&gt;</code>:</p>
    <pre class="prettyprint"><code><span class="tag">&lt;body</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"different"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;x-foo&gt;&lt;/x-foo&gt;</span><span class="pln">
</span><span class="tag">&lt;/body&gt;</span></code></pre>
    <p>You can
        <code>:host-context(.different)</code>to style
        <code>&lt;x-foo&gt;</code>when it&#8217;s a descendant of an element with the class
        <code>.different</code>:</p>
    <pre class="prettyprint"><code><span class="pun">:</span><span class="pln">host</span><span class="pun">-</span><span class="pln">context</span><span class="pun">(.</span><span class="pln">different</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  color</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
    <p>This gives you the ability encapsulate style rules in an element&#8217;s Shadow DOM that uniquely style it, based on its context.</p>
    <h3 id="toc-style-multi">Support multiple host types from within one shadow root</h3>

    <p>Another use for
        <code>:host</code>is if you&#8217;re creating a theming library and want to support styling many types of host elements from within the same Shadow DOM.</p>
    <pre class="prettyprint"><code><span class="pun">:</span><span class="pln">host</span><span class="pun">(</span><span class="pln">x</span><span class="pun">-</span><span class="pln">foo</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> 
  </span><span class="com">/* Applies if the host is a &lt;x-foo&gt; element.*/</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="pun">:</span><span class="pln">host</span><span class="pun">(</span><span class="pln">x</span><span class="pun">-</span><span class="pln">foo</span><span class="pun">:</span><span class="pln">host</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> 
  </span><span class="com">/* Same as above. Applies if the host is a &lt;x-foo&gt; element. */</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="pun">:</span><span class="pln">host</span><span class="pun">(</span><span class="pln">div</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="pun">{</span><span class="pln">
  </span><span class="com">/* Applies if the host element is a &lt;div&gt;. */</span><span class="pln">
</span><span class="pun">}</span></code></pre>
    <h2 id="toc-style-cat-hat">Styling Shadow DOM internals from the outside</h2>

    <p>The
        <code>::shadow</code>pseudo-element and
        <code>/deep/</code>combinator are like having a Vorpal sword of CSS authority. They allow piercing through Shadow DOM&#8217;s boundary to style elements within shadow trees.</p>
    <h3 id="toc-style-hat">The ::shadow pseudo-element</h3>

    <p>If an element has at least one shadow tree, the
        <code>::shadow</code>pseudo-element matches the shadow root itself. It allows you to write selectors that style nodes internal to an element&#8217;s shadow dom.</p>
    <p>For example, if an element is hosting a shadow root, you can write
        <code>#host::shadow span {}</code>to style all of the spans within its shadow tree.</p>
    <pre class="prettyprint"><code><span class="tag">&lt;style&gt;</span><span class="pln">
  </span><span class="pun">#</span><span class="kwd">host</span><span class="pun">::</span><span class="pln">shadow span </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">color</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="tag">&lt;/style&gt;</span><span class="pln">

</span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"host"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;span&gt;</span><span class="pln">Light DOM</span><span class="tag">&lt;/span&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span><span class="pln">

</span><span class="tag">&lt;script&gt;</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> host </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> host</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
  root</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">"&lt;span&gt;Shadow DOM&lt;/span&gt;"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
                   </span><span class="str">"&lt;content&gt;&lt;/content&gt;"</span><span class="pun">;</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></code></pre>
    <div class="demoarea">
        <div id="style-hat-ex">
            <span>Light DOM</span>
        </div>
    </div>

    <script>
    (function() {
        var host = document.querySelector('#style-hat-ex');
        var root = host.createShadowRoot();
        root.innerHTML = '<span>Shadow DOM</span>' +
            '<content></content>';
    })();
    </script>

    <p>
        <strong>Example</strong>(custom elements) -
        <code>&lt;x-tabs&gt;</code>has
        <code>&lt;x-panel&gt;</code>children in its Shadow DOM. Each panel hosts its own shadow tree containing
        <code>h2</code>headings. To style those headings from the main page, one could write:</p>
    <pre class="prettyprint"><code><span class="pln">x</span><span class="pun">-</span><span class="pln">tabs</span><span class="pun">::</span><span class="pln">shadow x</span><span class="pun">-</span><span class="pln">panel</span><span class="pun">::</span><span class="pln">shadow h2 </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
    <h3 id="toc-style-cat">The /deep/ combinator</h3>

    <p>The
        <code>/deep/</code>combinator is similar to
        <code>::shadow</code>, but more powerful. It completely ignores all shadow boundaries and crosses into any number of shadow trees. Put simply,
        <code>/deep/</code>allows you to drill into an element&#8217;s guts and target any node.</p>
    <p>The
        <code>/deep/</code>combinator is particularly useful in the world of Custom Elements where it&#8217;s common to have multiple levels of Shadow DOM. Prime examples are nesting a bunch of custom elements (each hosting their own shadow tree) or creating an element that inherits from another using
        <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom-301/#toc-shadow-insertion">
            <code>&lt;shadow&gt;</code>
        </a>.</p>
    <p>
        <strong>Example</strong>(custom elements) - select all
        <code>&lt;x-panel&gt;</code>elements that are descendants of
        <code>&lt;x-tabs&gt;</code>, anywhere in the tree:</p>
    <pre class="prettyprint"><code><span class="pln">x</span><span class="pun">-</span><span class="pln">tabs </span><span class="pun">/</span><span class="pln">deep</span><span class="pun">/</span><span class="pln"> x</span><span class="pun">-</span><span class="pln">panel </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
    <p>
        <strong>Example</strong>- style all elements with the class
        <code>.library-theme</code>, anywhere in a shadow tree:</p>
    <pre class="prettyprint"><code><span class="pln">body </span><span class="pun">/</span><span class="pln">deep</span><span class="pun">/</span><span class="pln"> </span><span class="pun">.</span><span class="pln">library</span><span class="pun">-</span><span class="pln">theme </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
    <h3 id="toc-css-traverasl">Working with querySelector()</h3>

    <p>Just like
        <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom-301/#toc-get-shadowroot">
            <code>.shadowRoot</code>
        </a>opens shadow trees up for DOM traversal, the combinators open shadow trees for selector traversal. Instead of writing a nested chain of madness, you can write a single statement:</p>
    <pre class="prettyprint"><code><span class="com">// No fun.</span><span class="pln">
document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'x-tabs'</span><span class="pun">).</span><span class="pln">shadowRoot
        </span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'x-panel'</span><span class="pun">).</span><span class="pln">shadowRoot
        </span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#foo'</span><span class="pun">);</span><span class="pln">

</span><span class="com">// Fun.</span><span class="pln">
document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'x-tabs::shadow x-panel::shadow #foo'</span><span class="pun">);</span></code></pre>
    <h3 id="toc-style-native">Styling native elements</h3>

    <p>Native HTML controls are a challenge to style. Many people simply give up and roll their own. However, with
        <code>::shadow</code>and
        <code>/deep/</code>, any element in the web platform that uses Shadow DOM can be styled. Great examples are the
        <code>&lt;input&gt;</code>types and
        <code>&lt;video&gt;</code>:</p>
    <pre class="prettyprint"><code><span class="pln">video </span><span class="pun">/</span><span class="pln">deep</span><span class="pun">/</span><span class="pln"> input</span><span class="pun">[</span><span class="pln">type</span><span class="pun">=</span><span class="str">"range"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  background</span><span class="pun">:</span><span class="pln"> hotpink</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
    <div class="demoarea">
        <video id="ex-style-video" controls=""></video>
    </div>

    <blockquote class="commentary talkinghead">
        Do the
        <code>::shadow</code>pseudo-element and
        <code>/deep/</code>combinator defeat the purpose of style encapsulation? Out of the box, Shadow DOM prevents
        <em>accidental</em>styling from outsiders but it never promises to be a bullet proof vest. Developers should be allowed to
        <em>intentionally</em>style inner parts of your Shadow tree&#8230;if they know what they&#8217;re doing. Having more control is also good for flexibility, theming, and the re-usability of your elements.
    </blockquote>

    <h2 id="toc-style-hooks">Creating style hooks</h2>

    <p>Customization is good. In certain cases, you may want to poke holes in your Shadow&#8217;s styling shield and create hooks for others to style.</p>
    <h3 id="toc-custom-pseduo">Using ::shadow and /deep/</h3>

    <p>There&#8217;s a lot of power behind
        <code>/deep/</code>. It gives component authors a way to designate individual elements as styleable or a slew of elements as themeable.</p>
    <p>
        <strong>Example</strong>- style all elements that have the class
        <code>.library-theme</code>, ignoring all shadow trees:</p>
    <pre class="prettyprint"><code><span class="pln">body </span><span class="pun">/</span><span class="pln">deep</span><span class="pun">/</span><span class="pln"> </span><span class="pun">.</span><span class="pln">library</span><span class="pun">-</span><span class="pln">theme </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
    <p></p>
    <h3 id="toc-vars">Using CSS Variables</h3>

    <p>A powerful way to create theming hooks will be through <a href="http://dev.w3.org/csswg/css-variables/">CSS Variables</a>. Essentially, creating &#8220;style placeholders&#8221; for other users to fill in.</p>
    <p>Imagine a custom element author who marks out variable placeholders in their Shadow DOM. One for styling an internal button&#8217;s font and another for its color:</p>
    <pre class="prettyprint"><code><span class="pln">button </span><span class="pun">{</span><span class="pln">
  color</span><span class="pun">:</span><span class="pln"> </span><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#including_a_mixin" id="tooltip673.63" target="_blank" data-tooltip="/*Vendor prefixes required. Try Compass/SASS.*/
-webkit-var ...
   -moz-var ...
    -ms-var ...
     -o-var ...
        var ..." role="tooltip" aria-describedby="tooltip673.63" class="noexternal tooltip"><span class="pun">+</span><span class="property"><span class="kwd">var</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">button</span><span class="pun">-</span><span class="pln">text</span><span class="pun">-</span><span class="pln">color</span><span class="pun">,</span><span class="pln"> pink</span><span class="pun">);</span></a><span class="pln"> </span><span class="com">/* default color will be pink */</span><span class="pln">
  font</span><span class="pun">:</span><span class="pln"> </span><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#including_a_mixin" id="tooltip673.63" target="_blank" data-tooltip="/*Vendor prefixes required. Try Compass/SASS.*/
-webkit-var ...
   -moz-var ...
    -ms-var ...
     -o-var ...
        var ..." role="tooltip" aria-describedby="tooltip673.63" class="noexternal tooltip"><span class="pun">+</span><span class="property"><span class="kwd">var</span></span><span class="pln"> </span><span class="pun">(</span><span class="pln">button</span><span class="pun">-</span><span class="pln">font</span><span class="pun">)</span><span class="pln"> </span><span class="pun">;</span></a><span class="pln">
</span><span class="pun">}</span></code></pre>
    <p>Then, the embedder of the element defines those values to their liking. Perhaps to match the super cool Comic Sans theme of their own page:</p>
    <pre class="prettyprint"><code><span class="com">#host {</span><span class="pln">
  </span><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#including_a_mixin" id="tooltip673.63" target="_blank" data-tooltip="/*Vendor prefixes required. Try Compass/SASS.*/
-webkit-var-button-text-color: ...
   -moz-var-button-text-color: ...
    -ms-var-button-text-color: ...
     -o-var-button-text-color: ...
        var-button-text-color: ..." role="tooltip" aria-describedby="tooltip673.63" class="noexternal tooltip"><span class="pun">+</span><span class="property"><span class="kwd">var</span><span class="pun">-</span><span class="pln">button</span><span class="pun">-</span><span class="pln">text</span><span class="pun">-</span><span class="pln">color</span><span class="pun">:</span></span><span class="pln"> green</span><span class="pun">;</span></a><span class="pln">
  </span><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#including_a_mixin" id="tooltip673.63" target="_blank" data-tooltip="/*Vendor prefixes required. Try Compass/SASS.*/
-webkit-var-button-font: ...
   -moz-var-button-font: ...
    -ms-var-button-font: ...
     -o-var-button-font: ...
        var-button-font: ..." role="tooltip" aria-describedby="tooltip673.63" class="noexternal tooltip"><span class="pun">+</span><span class="property"><span class="kwd">var</span><span class="pun">-</span><span class="pln">button</span><span class="pun">-</span><span class="pln">font</span><span class="pun">:</span></span><span class="pln"> </span><span class="str">"Comic Sans MS"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Comic Sans"</span><span class="pun">,</span><span class="pln"> cursive</span><span class="pun">;</span></a><span class="pln">
</span><span class="pun">}</span></code></pre>
    <p>Due to the way CSS Variables inherit, everything is peachy and this works beautifully! The whole picture looks like this:</p>
    <pre class="prettyprint"><code><span class="tag">&lt;style&gt;</span><span class="pln">
  </span><span class="pun">#</span><span class="pln">host </span><span class="pun">{</span><span class="pln">
    </span><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#including_a_mixin" id="tooltip673.63" target="_blank" data-tooltip="/*Vendor prefixes required. Try Compass/SASS.*/
-webkit-var-button-text-color: ...
   -moz-var-button-text-color: ...
    -ms-var-button-text-color: ...
     -o-var-button-text-color: ...
        var-button-text-color: ..." role="tooltip" aria-describedby="tooltip673.63" class="noexternal tooltip"><span class="pun">+</span><span class="property"><span class="kwd">var-button-text-color</span><span class="pun">:</span></span><span class="pln"> green</span><span class="pun">;</span></a><span class="pln">
    </span><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#including_a_mixin" id="tooltip673.63" target="_blank" data-tooltip="/*Vendor prefixes required. Try Compass/SASS.*/
-webkit-var-button-font: ...
   -moz-var-button-font: ...
    -ms-var-button-font: ...
     -o-var-button-font: ...
        var-button-font: ..." role="tooltip" aria-describedby="tooltip673.63" class="noexternal tooltip"><span class="pun">+</span><span class="property"><span class="kwd">var-button-font</span><span class="pun">:</span></span><span class="pln"> </span><span class="str">"Comic Sans MS"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Comic Sans"</span><span class="pun">,</span><span class="pln"> cursive</span><span class="pun">;</span></a><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="tag">&lt;/style&gt;</span><span class="pln">
</span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"host"</span><span class="tag">&gt;</span><span class="pln">Host node</span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#host'</span><span class="pun">).</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
root</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;style&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
    </span><span class="str">'button {'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
      </span><span class="str">'color: </span><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#including_a_mixin" id="tooltip673.63" target="_blank" data-tooltip="/*Vendor prefixes required. Try Compass/SASS.*/
-webkit-var ...
   -moz-var ...
    -ms-var ...
     -o-var ...
        var ..." role="tooltip" aria-describedby="tooltip673.63" class="noexternal tooltip"><span class="str">+</span><span class="property"><span class="str">var</span></span><span class="str"> (button-text-color, pink);</span></a><span class="str">'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
      </span><span class="str">'font: </span><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#including_a_mixin" id="tooltip673.63" target="_blank" data-tooltip="/*Vendor prefixes required. Try Compass/SASS.*/
-webkit-var ...
   -moz-var ...
    -ms-var ...
     -o-var ...
        var ..." role="tooltip" aria-describedby="tooltip673.63" class="noexternal tooltip"><span class="str">+</span><span class="property"><span class="str">var</span></span><span class="str"> (button-font) ;</span></a><span class="str">'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
    </span><span class="str">'}'</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
    </span><span class="str">'&lt;/style&gt;'</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
    </span><span class="str">'&lt;content&gt;&lt;/content&gt;'</span><span class="pun">;</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></code></pre>
    <blockquote class="commentary talkinghead">
        I&#8217;ve already mentioned <a href="http://Robing.github.io/tutorials/webcomponents/customelements/">Custom Elements</a> a few times in this article. For now, just know that Shadow DOM forms their structural foundation by providing styling and DOM encapsulation. The concepts here pertain to styling Custom Elements.
    </blockquote>

    <p></p>
    <h2 id="toc-style-disbtributed-nodes">Styling distributed nodes</h2>

    <p>Distributed nodes are elements that render at an <a href="http://Robing.github.io/tutorials/webcomponents/shadowdom-301/#toc-distributed-nodes">insertion point</a> (a
        <code>&lt;content&gt;</code>element). The
        <code>&lt;content&gt;</code>element allows you to select nodes from the Light DOM and render them at predefined locations in your Shadow DOM. They&#8217;re not logically in the Shadow DOM; they&#8217;re still children of the host element. Insertion points are just a rendering thing.</p>
    <p>Distributed nodes retain styles from the main document. That is, style rules from the main page continue to apply to the elements, even when they render at an insertion point. Again, distributed nodes are still logically in the light dom and don&#8217;t move. They just render elsewhere. However, when the nodes get distributed into the Shadow DOM, they can take on additional styles defined inside the shadow tree.</p>
    <h3 id="toc-distributed">::content pseudo element</h3>

    <p>Distributed nodes are children of the host element, so how can we target them from
        <em>within</em>the Shadow DOM? The answer is the CSS
        <code>::content</code>pseudo element. It&#8217;s a way to target Light DOM nodes that pass through an insertion point. For example:</p>
    <p>
        <code>::content &gt; h3</code>styles any
        <code>h3</code>tags that pass through an insertion point.</p>
    <p>Let&#8217;s see an example:</p>
    <pre class="prettyprint"><code><span class="tag">&lt;div&gt;</span><span class="pln">
  </span><span class="tag">&lt;h3&gt;</span><span class="pln">Light DOM</span><span class="tag">&lt;/h3&gt;</span><span class="pln">
  </span><span class="tag">&lt;section&gt;</span><span class="pln">
    </span><span class="tag">&lt;div&gt;</span><span class="pln">I'm not underlined</span><span class="tag">&lt;/div&gt;</span><span class="pln">
    </span><span class="tag">&lt;p&gt;</span><span class="pln">I'm underlined in Shadow DOM!</span><span class="tag">&lt;/p&gt;</span><span class="pln">
  </span><span class="tag">&lt;/section&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span><span class="pln">

</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> div </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'div'</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> div</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
root</span><span class="pun">.</span><span class="pln">innerHTML </span><span class="pun">=</span><span class="pln"> </span><span class="str">'</span><span class="pln">\
    </span><span class="pun">&lt;</span><span class="pln">style</span><span class="pun">&gt;</span><span class="pln">\
      h3 </span><span class="pun">{</span><span class="pln"> color</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">\
      content</span><span class="pun">[</span><span class="pln">select</span><span class="pun">=</span><span class="str">"h3"</span><span class="pun">]::</span><span class="pln">content </span><span class="pun">&gt;</span><span class="pln"> h3 </span><span class="pun">{</span><span class="pln">\
        color</span><span class="pun">:</span><span class="pln"> green</span><span class="pun">;</span><span class="pln">\
      </span><span class="pun">}</span><span class="pln">\
      </span><span class="pun">::</span><span class="pln">content section p </span><span class="pun">{</span><span class="pln">\
        text</span><span class="pun">-</span><span class="pln">decoration</span><span class="pun">:</span><span class="pln"> underline</span><span class="pun">;</span><span class="pln">\
      </span><span class="pun">}</span><span class="pln">\
    </span><span class="pun">&lt;</span><span class="str">/style&gt;\
    &lt;h3&gt;Shadow DOM&lt;/</span><span class="pln">h3</span><span class="pun">&gt;</span><span class="pln">\
    </span><span class="pun">&lt;</span><span class="pln">content select</span><span class="pun">=</span><span class="str">"h3"</span><span class="pun">&gt;&lt;/</span><span class="pln">content</span><span class="pun">&gt;</span><span class="pln">\
    </span><span class="pun">&lt;</span><span class="pln">content select</span><span class="pun">=</span><span class="str">"section"</span><span class="pun">&gt;&lt;/</span><span class="pln">content</span><span class="pun">&gt;</span><span class="str">';</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></code></pre>
    <div class="demoarea">
        <div id="style-ex-distributed">
            <h3>Light DOM</h3>
            <section>
                <div>I&#8217;m not underlined</div>
                <p>I&#8217;m underlined in Shadow DOM!</p>
            </section>
        </div>
    </div>

    <script>
    (function() {
        var container = document.querySelector('#style-ex-distributed');
        var root = container.createShadowRoot();
        root.innerHTML = '\
  <style>\
    h3 { color: red; }\
    content[select="h3"]::content > h3 {\
      color: green;\
    }\
    ::content section p {\
      text-decoration: underline;\
    }\
  </style>\
  <h3>Shadow DOM</h3>\
  <content select="h3"></content>\
  <content select="section"></content>';
    })();
    </script>

    <p>You should see &#8221;
        <span style="color:red">Shadow DOM</span>&#8221; and &#8221;
        <span style="color:green">Light DOM</span>&#8221; below it. Also note that &#8220;Light DOM&#8221; is still retaining the styles (margins etc.) defined on this page. That&#8217;s because the page&#8217;s styles still match!</p>
    <p></p>


    <blockquote class="commentary talkinghead">
        Remember: styles defined in the host document continue to apply to nodes they target, even when those nodes get distributed &#8220;inside&#8221; the Shadow DOM. Going into an insertion point doesn&#8217;t change what&#8217;s applied.
    </blockquote>

    <h2 id="toc-conclusion">Conclusion</h2>

    <p>As authors of custom elements, we have a ton of options for controlling the look and feel of our content. Shadow DOM forms the basis for this brave new world.</p>
    <p>Shadow DOM gives us scoped style encapsulation and a means to let in as much (or as little) of the outside world as we choose. By defining custom pseudo elements or including CSS Variable placeholders, authors can provide third-parties convenient styling hooks to further customize their content. All in all, web authors are in full control of how their content is represented.</p>
    <p class="small-notice">
        Thanks to <a href="http://Robing.github.io/profiles/#dominiccooney">Dominic Cooney</a> and
        <a href="https://plus.google.com/111648463906387632236/posts">Dimitri Glazkov</a> for reviewing the content of this tutorial.
    </p>

    <p>
    </p>
    <aside class="panel">
        <h2>Related reading</h2>
        <ul>
            <li><a href="http://Robing.github.io/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a>
            </li>
            <li><a href="http://Robing.github.io/tutorials/webcomponents/shadowdom-301/">Shadow DOM 301 - Advanced Concepts &amp; DOM APIs</a>
            </li>
            <li><a href="http://Robing.github.io/tutorials/webcomponents/customelements/">Custom Elements - defining new elements in HTML</a>
            </li>
        </ul>
    </aside>
    <p></p>
    <script>
    document.addEventListener('DOMContentLoaded', function(e) {
        if (!isCompatible()) {
            document.body.classList.add('disabledemos');
            $('.featuresupported').removeClass('no');
        }
    });
    </script>

</div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Shadow DOM 101]]></title>
    <link href="http://Robing.github.io/blog/2014/05/16/shadow-dom-101/"/>
    <updated>2014-05-16T10:09:17+08:00</updated>
    <id>http://Robing.github.io/blog/2014/05/16/shadow-dom-101</id>
    <content type="html"><![CDATA[<div class="content" id="article-content">        
<p></p>

<h2 id="toc-introduction">‰ªãÁªç</h2>

<p>
Web ÁªÑ‰ª∂ÊòØ‰∏ÄÁ≥ªÂàóÂâçÊ≤øËßÑËåÉÔºåÂÆÉÔºö
</p>

<ol>
<li>‰ΩøÂæóÊûÑÂª∫ÈÉ®‰ª∂(widget)Êàê‰∏∫ÂèØËÉΩ</li>
<li>‚Ä¶ÈáçÁî®Êõ¥‰∏∫ÂèØÈù†</li>
<li>
‚Ä¶Âç≥‰æøÂêéÁª≠ÁâàÊú¨ÁöÑÁªÑ‰ª∂‰øÆÊîπ‰∫ÜÂÜÖÈÉ®ÂÆûÁé∞ÁªÜËäÇ‰πü‰∏ç‰ºö‰ΩøÈ°µÈù¢Âá∫Èîô„ÄÇ
</li>
</ol>

<p>
ËøôÊòØÂê¶ÊÑèÂë≥ÁùÄ‰Ω†ÂæóÂÜ≥ÂÆö‰ªÄ‰πàÊó∂ÂÄôÁî® HTML/JavaScriptÔºå‰ªÄ‰πàÊó∂ÂÄôÁî® Web ÁªÑ‰ª∂Ôºü‰∏çÔºÅHTML Âíå JavaScript ÂèØ‰ª•Âà∂‰Ωú‰∫§‰∫íÂºèÂèØËßÜÂåñÂÜÖÂÆπÔºå
ÈÉ®‰ª∂‰πüÊòØ‰∫§‰∫íÂºèÂèØËßÜÂåñÂÜÖÂÆπ„ÄÇÂú®ÂºÄÂèëÈÉ®‰ª∂ÁöÑËøáÁ®ã‰∏≠Ëá™ÁÑ∂ËÄåÁÑ∂ÁöÑÂ∞±‰ºöÂà©Áî®‰Ω†ÁöÑ HTML Âíå JavaScript ÊäÄÂ∑ß„ÄÇWeb ÁªÑ‰ª∂Ê†áÂáÜÂ∞±ÊòØ‰ª•Ê≠§‰∏∫ÁõÆÁöÑËÄåËÆæËÆ°ÁöÑ„ÄÇ
</p>

<blockquote class="commentary talkinghead">
Ëã•ÊòØ‰ΩøÁî®Âà´ÁöÑÊäÄÊúØÊù•ÊûÑÂª∫ÈÉ®‰ª∂Âç¥‰πüËØ¥‰∏çÈÄö„ÄÇÊØîÂ¶ÇÔºåÊàëÂ∞±ËÇØÂÆö‰∏ç‰ºöÊé®Ëçê‰Ω†Áî® <code>&lt;canvas&gt;</code> Êù•ÂÜôÈÉ®‰ª∂„ÄÇÂÆÉÁ°ÆÂÆûÂèØÈù†‚Äî‚ÄîÂ¶ÇÊûú‰Ω†‰øÆÊîπÁªòÂà∂ÁöÑÂÜÖÂÆπ‰πü‰∏ç‰ºöÁ†¥ÂùèÈ°µÈù¢‚Äî‚Äî‰ΩÜÂÆÉÂØπÂèØËÆøÈóÆÊÄß(accessibility)ÔºåÁ¥¢Âºï(indexing)ÔºåÁªÑÂêà(composition)ÔºåÂàÜËæ®ÁéáÊó†ÂÖ≥(resolution independence)ÈÉΩ‰∏çÂèãÂ•Ω„ÄÇ
</blockquote>

<p>
‰ΩÜÊúâ‰∏™Ê†πÊú¨ÈóÆÈ¢òÔºåÂØºËá¥ HTML Âíå JavaScript ÊûÑÂª∫Âá∫Êù•ÁöÑÈÉ®‰ª∂Èöæ‰ª•‰ΩøÁî®ÔºöÈÉ®‰ª∂‰∏≠ÁöÑ DOM Ê†ëÂπ∂Ê≤°ÊúâÂ∞ÅË£ÖËµ∑Êù•„ÄÇ
Â∞ÅË£ÖÁöÑÁº∫‰πèÊÑèÂë≥ÁùÄÊñáÊ°£‰∏≠ÁöÑÊ†∑ÂºèË°®‰ºöÊó†ÊÑè‰∏≠ÂΩ±ÂìçÈÉ®‰ª∂‰∏≠ÁöÑÊüê‰∫õÈÉ®ÂàÜÔºõ
JavaScript ÂèØËÉΩÂú®Êó†ÊÑè‰∏≠‰øÆÊîπÈÉ®‰ª∂‰∏≠ÁöÑÊüê‰∫õÈÉ®ÂàÜÔºõ‰Ω†‰π¶ÂÜôÁöÑ ID ‰πüÂèØËÉΩ‰ºöÊääÈÉ®‰ª∂ÂÜÖÈÉ®ÁöÑ ID Ë¶ÜÁõñ„ÄÇ
</p>

<blockquote class="commentary">
Áº∫‰πèÂ∞ÅË£ÖÁöÑ‰∏Ä‰∏™ÊòéÊòæÁº∫ÁÇπÂú®‰∫éÔºöÂ¶ÇÊûú‰Ω†Êõ¥Êñ∞‰∫ÜÂ∫ìÊàñËÄÖÈÉ®‰ª∂ÁöÑ DOM Êõ¥Êîπ‰∫ÜÂÜÖÈÉ®ÁªÜËäÇÔºå‰Ω†ÁöÑÊ†∑ÂºèÂíåËÑöÊú¨Â∞±ÂèØËÉΩÂú®‰∏çÁªèÊÑèÈó¥ÈÅ≠Âà∞Á†¥Âùè„ÄÇ
</blockquote>

<p>
Web ÁªÑ‰ª∂Áî±ÂõõÈÉ®ÂàÜÁªÑÊàêÔºö
</p>

<ol>
<li><a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/templates/index.html">Templates</a></li>
<li><a href="http://www.w3.org/TR/shadow-dom/">Shadow
DOM</a></li>
<li><a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/custom/index.html">Custom
Elements</a></li>
<li><a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/explainer/index.html#external-custom-elements-and-decorators">Packaging</a></li>
</ol>

<p>
<b>Shadow DOM</b> Ëß£ÂÜ≥‰∫Ü DOM Ê†ëÁöÑÂ∞ÅË£ÖÈóÆÈ¢ò„ÄÇWeb ÁªÑ‰ª∂ÁöÑÂõõÈÉ®ÂàÜË¢´ËÆæËÆ°ÊàêÈÖçÂêàÂ∑•‰ΩúÔºå‰ΩÜ‰Ω†‰πüÂèØ‰ª•ÈÄâÊã© Web ÁªÑ‰ª∂‰∏≠ÁöÑÊüê‰∏™ÈÉ®ÂàÜÊù•‰ΩøÁî®„ÄÇËØ•ÊïôÁ®ãÂ∞ÜÊïô‰ºö‰Ω†Â¶Ç‰Ωï‰ΩøÁî® Shadow DOM„ÄÇ
</p>

<p class="notice">
<b>Ê≥®ÊÑèÔºö</b> Chrome 25+ ÊîØÊåÅ Shadow DOMÔºå‰ΩÜ API ÈúÄË¶ÅÂä† <code>webkit</code> ÂâçÁºÄ„ÄÇ Âú® Chrome ÁöÑÊúÄÊñ∞ÁâàÊú¨‰∏≠Â¢ûÂä†‰∫ÜÊó†ÂâçÁºÄÁöÑ APIÔºåÂèØ‰ª•ÈÄöËøáÂºÄÂêØ <code>about:flags</code> ‰∏ãÁöÑ &#8220;ÂÆûÈ™åÊÄßÁΩëÁªúÂπ≥Âè∞ÂäüËÉΩ&#8221;Êù•‰ΩøÁî®„ÄÇ
</p>

<h2 id="toc-hello-world">Hello, Shadow World</h2>

<p>
Êúâ‰∫Ü Shadow DOMÔºåÂÖÉÁ¥†Â∞±ÂèØ‰ª•Âíå‰∏Ä‰∏™Êñ∞Á±ªÂûãÁöÑËäÇÁÇπÂÖ≥ËÅî„ÄÇËøô‰∏™Êñ∞Á±ªÂûãÁöÑËäÇÁÇπÁß∞‰∏∫ <b>shadow root„ÄÇ</b>‰∏é‰∏Ä‰∏™ shadow root ÂÖ≥ËÅîÁöÑÂÖÉÁ¥†Áß∞‰Ωú‰∏Ä‰∏™ <b>shadow host„ÄÇ</b>shadow host ÁöÑÂÜÖÂÆπ‰∏ç‰ºöÊ∏≤ÊüìÔºõshadow root ÁöÑÂÜÖÂÆπ‰ºöÊ∏≤Êüì„ÄÇ
</p>
<!-- more -->
<p>
ÊØîÂ¶ÇÔºå‰Ω†Êã•ÊúâÂ¶Ç‰∏ãÁöÑÊ†áËÆ∞Ôºö
</p>

<span class="tag">&lt;button&gt;</span><span class="pln">Hello, world!</span><span class="tag">&lt;/button&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> host </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">&#8216;button&#8217;</span><span class="pun">);</span><span class="pln">
</span><b><span class="kwd">var</span><span class="pln"> root </span><span class="pun">=</span><span class="pln"> host</span><span class="pun">.</span><span class="pln">createShadowRoot</span><span class="pun">();</span></b><span class="pln">
root</span><span class="pun">.</span><span class="pln">textContent </span><span class="pun">=</span><span class="pln"> </span><span class="str">&#8216;„Åì„Çì„Å´„Å°„ÅØ„ÄÅÂΩ±„ÅÆ‰∏ñÁïå!&#8217;</span><span class="pun">;</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span>


<p>Âõ†Ê≠§ÔºåÁõ∏ÊØîÊòæÁ§∫‰ª•‰∏ãÂÜÖÂÆπ</p>

<button id="ex1a">Hello, world!</button>
<script>
function remove(selector) {
  Array.prototype.forEach.call(
      document.querySelectorAll(selector),
      function (node) { node.parentNode.removeChild(node); });
}

if (!HTMLElement.prototype.webkitCreateShadowRoot) {
  remove('#ex1a');
  document.write('<img src="SS1.png" alt="Screenshot of a button with \'Hello, world!\' on it.">');
}
</script>

<p>È°µÈù¢Â∞Ü‰ºöÂëàÁé∞Â¶Ç‰∏ãÂÜÖÂÆπ</p>

<button id="ex1b">Hello, world!</button>
<script>
(function () {
  if (!HTMLElement.prototype.webkitCreateShadowRoot) {
    remove('#ex1b');
    document.write('<img src="SS2.png" alt="Screenshot of a button with \'Hello, shadow world!\' in Japanese on it.">');
    return;
  }
  var host = document.querySelector('#ex1b');
  var root = host.webkitCreateShadowRoot();
  root.textContent = '„Åì„Çì„Å´„Å°„ÅØ„ÄÅÂΩ±„ÅÆ‰∏ñÁïå!';
})();
</script>

<p>
‰∏ç‰ªÖÂ¶ÇÊ≠§ÔºåËã•È°µÈù¢‰∏≠ÁöÑ JavaScript ÊÉ≥Ëé∑ÂæóÊåâÈíÆÁöÑ <span class="property">textContent</span> ÊòØ‰ªÄ‰πàÔºåÂÆÉ‰∏ç‰ºöÂæóÂà∞ ‚Äú„Åì„Çì„Å´„Å°„ÅØ„ÄÅÂΩ±„ÅÆ‰∏ñÁïå!‚ÄùÔºåËÄåÊòØ ‚ÄúHello, world!‚ÄùÔºåÂõ†‰∏∫ shadow root ‰∏ãÁöÑ DOM Â≠êÊ†ëË¢´Â∞ÅË£Ö‰∫ÜËµ∑Êù•„ÄÇ
</p>

<p>
‰ªãÁªç‰∏Ä‰∏™(ÂèØËÉΩ‰∏çË¢´ÈÅµÂÆàÁöÑ)ÁªèÈ™åÊ≥ïÂàôÔºå
‰Ω†‰∏çÂ∫îËØ•Êää<em>ÂÜÖÂÆπ</em>ÊîæÂà∞ Shadow DOM ‰∏≠„ÄÇÂÜÖÂÆπÂøÖÈ°ªÊîæÂÖ•ÊñáÊ°£ÂÜÖ‰ª•‰æøÂ±èÂπïÈòÖËØªÂô®ÔºåÊêúÁ¥¢ÂºïÊìéÔºåÊâ©Â±ïÁ≠âÁ±ª‰ººÁ®ãÂ∫èÂèØ‰ª•ËÆøÈóÆÂà∞„ÄÇ
Âú®ÂàõÂª∫‰∏Ä‰∏™Âê∏Âºï‰∫∫ÁöÑÔºåÂèØÈáçÁî®ÁöÑÈÉ®‰ª∂Êó∂ÔºåÈÇ£‰∫õÊó†ÊÑè‰πâÁöÑÊ†áËÆ∞Ë¶ÅÊîæËøõ Shadow DOM ‰∏≠ÔºåÂèØÂÜÖÂÆπËøòÂæóÁïôÂú®È°µÈù¢Èáå„ÄÇ
</p>

<blockquote class="commentary talkinghead">
ÂΩìÁÑ∂ÔºåËøôÂπ∂‰∏çÊòØÂøÖÈ°ªÈÅµÂÆàÁöÑÔºõÂú® web ‰∏ä‰Ω†ÂèØ‰ª•ÊåâÁÖßËá™Â∑±ÁöÑÂñúÂ•ΩÊù•ÂÅö„ÄÇ‰ΩÜÂçÉ‰∏áÂà´ËøáÁÅ´„ÄÇ
</blockquote>

<h2 id="toc-separation">‰ªéÂ±ïÁé∞‰∏≠ÂàÜÁ¶ªÂÜÖÂÆπ</h2>

<p>
Áé∞Âú®Êàë‰ª¨Êù•ÁúãÁúãÂ¶Ç‰Ωï‰ΩøÁî® Shadow DOM Êù•Â∞ÜÂÜÖÂÆπ‰ªéÂ±ïÁé∞‰∏≠ÂàÜÁ¶ªÂá∫Êù•„ÄÇÂÅáËÆæÊàë‰ª¨Êã•ÊúâÂ¶Ç‰∏ãÂßìÂêçÂç°Ôºö
</p>

<style>
.ex2a.outer {
  border: 2px solid brown;
  border-radius: 1em;
  background: red;
  font-size: 20pt;
  width: 12em;
  height: 7em;
  text-align: center;
}
.ex2a .boilerplate {
  color: white;
  font-family: sans-serif;
  padding: 0.5em;
}
.ex2a .name {
  color: black;
  background: white;
  font-family: &#8220;Marker Felt&#8221;, cursive;
  font-size: 45pt;
  padding-top: 0.2em;
}
</style>
<div class="ex2a outer">
  <div class="boilerplate">
    Hi! My name is
  </div>
  <div class="name">
    Bob
  </div>
</div>

<p>
‰ª•‰∏ãÊòØÊ†áËÆ∞ÔºåÂÆÉÂπ∂Ê≤°Êúâ‰ΩøÁî® Shadow DOMÔºö
</p>

<pre class="prettyprint"><span class="tag">&lt;style&gt;</span><span class="pln">
</span><span class="pun">.</span><span class="pln">outer </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">border</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2px</span><span class="pln"> solid brown</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">border-radius</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1em</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">background</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">font-size</span><span class="pun">:</span><span class="pln"> </span><span class="lit">20pt</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">12em</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">height</span><span class="pun">:</span><span class="pln"> </span><span class="lit">7em</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">text-align</span><span class="pun">:</span><span class="pln"> center</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pun">.</span><span class="pln">boilerplate </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">color</span><span class="pun">:</span><span class="pln"> white</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">font-family</span><span class="pun">:</span><span class="pln"> sans-serif</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">padding</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.5em</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pun">.</span><span class="pln">name </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">color</span><span class="pun">:</span><span class="pln"> black</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">background</span><span class="pun">:</span><span class="pln"> white</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">font-family</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Marker Felt"</span><span class="pun">,</span><span class="pln"> cursive</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">font-size</span><span class="pun">:</span><span class="pln"> </span><span class="lit">45pt</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">padding-top</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.2em</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="tag">&lt;/style&gt;</span><span class="pln">
</span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"outer"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"boilerplate"</span><span class="tag">&gt;</span><span class="pln">
    Hi! My name is
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"name"</span><span class="tag">&gt;</span><span class="pln">
    Bob
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span></pre>

<p>
Âõ†‰∏∫ DOM Ê†ëÁº∫‰πèÂ∞ÅË£ÖÔºåÊï¥‰∏™ÂßìÂêçÂç°ÁöÑÁªìÊûÑÈÉΩÊö¥Èú≤Áªô‰∫ÜÊñáÊ°£„ÄÇËã•ÊòØÈ°µÈù¢ÈáåÂÖ∂‰ªñÁöÑÂÖÉÁ¥†‰∏çÁªèÊÑèÈó¥‰ΩøÁî®‰∫ÜÂêåÊ†∑ÁöÑÁ±ªÂêçÊù•ËÆæÁΩÆÊ†∑ÂºèÊàñÊìç‰ΩúËÑöÊú¨ÔºåÈÇ£‰πàÊàë‰ª¨ÂèØÂ∞±ÊúâËã¶Êó•Â≠êËøá‰∫Ü„ÄÇ
</p>

<p>Êàë‰ª¨ÂÆåÂÖ®ÂèØ‰ª•ÈÅøÂÖçËøôÊ†∑ÁöÑÊÉÖÂÜµÂèëÁîü</p>

<h3 id="toc-separation-hide">Á¨¨‰∏ÄÊ≠•ÔºöÈöêËóèÂ±ïÁé∞ÁªÜËäÇ</h3>

<p>
‰ªéËØ≠‰πâ‰∏äËÆ≤ÔºåÊàë‰ª¨ÂèØËÉΩÂè™ÂÖ≥ÂøÉÂ¶Ç‰∏ãÂÜÖÂÆπÔºö
</p>

<ul>
<li>ËøôÊòØ‰∏Ä‰∏™ÂßìÂêçÂç°„ÄÇ</li>
<li>ÂêçÁß∞ÊòØ ‚ÄúBob‚Äù„ÄÇ</li>
</ul>

<p>
È¶ñÂÖàÔºåÊàë‰ª¨ÂÖàÊåâÁÖßÊúÄÊé•ËøëÊàë‰ª¨ÂÖ≥ÂøÉÁöÑËØ≠‰πâÁöÑÊñπÂºèÊù•‰π¶ÂÜôÊ†áËÆ∞Ôºö
</p>

<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"nameTag"</span><span class="tag">&gt;</span><span class="pln">Bob</span><span class="tag">&lt;/div&gt;</span></pre>

<p>
Êé•‰∏ãÊù•Êàë‰ª¨ÊääÊâÄÊúâÂíåÂ±ïÁé∞Áõ∏ÂÖ≥ÁöÑÊ†∑ÂºèÂíå div ÈÉΩÊîæÂÖ•‰∏Ä‰∏™ <code>&lt;template&gt;</code> ÂÖÉÁ¥†ÂÜÖÔºö
</p>

<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"nameTag"</span><span class="tag">&gt;</span><span class="pln">Bob</span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><b><span class="tag">&lt;template</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"nameTagTemplate"</span><span class="tag">&gt;</span></b><span class="pln">
</span><span class="unchanged"><span class="tag">&lt;style&gt;</span><span class="pln">
</span><span class="pun">.</span><span class="pln">outer </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">border</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2px</span><span class="pln"> solid brown</span><span class="pun">;</span><span class="pln">

  </span><span class="pun">‚Ä¶</span><span class="pln"> </span><span class="pun">Âíå‰∏äÈù¢‰∏ÄÊ†∑</span><span class="pln"> </span><span class="pun">‚Ä¶</span><span class="pln">

</span><span class="tag">&lt;/style&gt;</span><span class="pln">
</span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"outer"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"boilerplate"</span><span class="tag">&gt;</span><span class="pln">
    Hi! My name is
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"name"</span><span class="tag">&gt;</span><span class="pln">
    Bob
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span></span><span class="pln">
</span><b><span class="tag">&lt;/template&gt;</span></b>
</pre>

<p>
Ê≠§Êó∂Ôºå‚ÄòBob‚Äô ÊòØÂîØ‰∏ÄË¢´Ê∏≤ÊüìÁöÑÂÜÖÂÆπ„ÄÇÂõ†‰∏∫Êàë‰ª¨Êää‰∏éÂ±ïÁé∞ÊúâÂÖ≥ÁöÑ DOM ÂÖÉÁ¥†ÁßªÂä®Âà∞‰∫Ü‰∏Ä‰∏™ <code>&lt;template&gt;</code> ÂÖÉÁ¥†ÂÜÖÔºåÂÆÉ‰ª¨ÊòØ‰∏ç‰ºöË¢´Ê∏≤ÊüìÁöÑÔºå‰ΩÜÊòØÂÆÉ‰ª¨<em>ËÉΩÂ§ü</em>ÈÄöËøá JavaScript Êù•ËÆøÈóÆ„ÄÇÊé•‰∏ãÊù•Êàë‰ª¨Â∞±‰ºöÈÄöËøáËÑöÊú¨Êù•Â°´ÂÖÖ shadow rootÔºö
</p>

<pre class="prettyprint"><span class="tag">&lt;script&gt;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> shadow </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#nameTag'</span><span class="pun">).</span><span class="pln">createShadowRoot</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> template </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#nameTagTemplate'</span><span class="pun">);</span><span class="pln">
shadow</span><span class="pun">.</span><span class="pln">appendChild</span><span class="pun">(</span><span class="pln">template</span><span class="pun">.</span><span class="pln">content</span><span class="pun">);</span><span class="pln">
template</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">();</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></pre>

<blockquote class="commentary talkinghead">
TemplatesÔºåÂíå Shadow DOM ‰∏ÄÊ†∑Ôºå‰πüÊòØ‰∏Ä‰∏™ÂÆåÂñÑ‰∏≠ÁöÑËßÑËåÉ„ÄÇChrome Canary ÊîØÊåÅ <code>&lt;template&gt;</code> ÂÖÉÁ¥†„ÄÇ‰Ω†‰πüÂèØ‰ª•ÈÄâÊã©‰ΩøÁî® <span class="property">innerHTML</span>Ôºå<span class="method">appendChild</span>Ôºå<span class="method">getElementById</span> ËøôÊ†∑ÁöÑÊñπÊ≥ïÊàñÂ±ûÊÄßÊù•Â°´ÂÖÖ shadow root„ÄÇÊú¨Êñá‰∏ªË¶ÅËÆ®ËÆ∫ Shadow DOMÔºåÊâÄ‰ª•‰∏ç‰ºöÊ∂âÂèäÂ§™Â§ö template ÂÖÉÁ¥†ÁöÑÂ∑•‰ΩúÂéüÁêÜ„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥‰∫ÜËß£Êõ¥Â§ö <code>&lt;template&gt;</code> ÁöÑÂÜÖÂÆπÔºåÊü•Áúã <a href="http://Robing.github.io/tutorials/webcomponents/template/">HTML ÁöÑÊñ∞ Template Ê†áÁ≠æ</a>.
</blockquote>

<p>
Êàë‰ª¨Âª∫Á´ã‰∫Ü‰∏Ä‰∏™ shadow rootÔºåÂßìÂêçÂç°Ë¢´ÂÜçÊ¨°Ê∏≤Êüì„ÄÇÂ¶ÇÊûú‰Ω†Âè≥ÈîÆÁÇπÂáªÊ†áÁ≠æÔºåÈÄâÊã©Ê£ÄÊü•ÂÖÉÁ¥†Ôºå‰Ω†Â∞ÜÁúãÂà∞ÊºÇ‰∫ÆÂπ∂ÂØå‰∫éËØ≠‰πâÁöÑÊ†áËÆ∞Ôºö
</p>

<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"nameTag"</span><span class="tag">&gt;</span><span class="pln">Bob</span><span class="tag">&lt;/div&gt;</span></pre>

<p>
Ëøô‰æøÂç∞ËØÅ‰∫ÜÔºåÈÄöËøá‰ΩøÁî® Shadow DOMÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÂ±ïÁé∞ÁªÜËäÇÈöêËóèÂú®ÂßìÂêçÂç°‰∏≠„ÄÇÂ±ïÁé∞ÁªÜËäÇË¢´Â∞ÅË£ÖÂú®‰∫Ü Shadow DOM ‰∏≠„ÄÇ
</p>

<h3 id="toc-separation-separate">
Á¨¨‰∫åÊ≠•Ôºö‰ªéÂ±ïÁé∞‰∏≠ÂàÜÁ¶ªÂÜÖÂÆπ
</h3>

<p>
Áé∞Âú®Êàë‰ª¨ÁöÑÂßìÂêçÂç°ÂèØ‰ª•‰ªéÈ°µÈù¢‰∏≠ÈöêËóèÂ±ïÁé∞ÁªÜËäÇ‰∫ÜÔºå‰ΩÜÂ±ïÁé∞ÂíåÂÜÖÂÆπÂç¥Ê≤°ÊúâÂàÜÁ¶ªÔºå
Âõ†‰∏∫ËôΩÁÑ∂ÂÜÖÂÆπ(Â∞±ÊòØÂßìÂêç‚ÄúBob‚Äù)ÊòæÁ§∫Âú®‰∫ÜÈ°µÈù¢ÈáåÔºå‰ΩÜËøô‰∏™ÂßìÂêçÊòØ‰ªé shadow root ‰∏≠Â§çÂà∂ËøáÊù•ÁöÑ„ÄÇ
Â¶ÇÊûúÊàë‰ª¨ÊÉ≥‰øÆÊîπÂßìÂêçÂç°ÁöÑÂßìÂêçÔºåÂ∞±Âæó‰øÆÊîπ‰∏§‰∏™Âú∞ÊñπÔºåËøôÂ∞±ÂèØËÉΩÈÄ†ÊàêÂÆÉ‰ª¨‰∏çÂêåÊ≠•„ÄÇ
</p>

<p>
HTML ÂÖÉÁ¥†ÊòØÂèØÁªÑÂêàÁöÑ ‚Äî ÊØîÂ¶ÇËØ¥‰Ω†ÂèØ‰ª•Êää‰∏Ä‰∏™ÊåâÈíÆÊîæËøõ‰∏Ä‰∏™Ë°®Ê†ºÈáå„ÄÇ
Âú®ËøôÂÑøÊàë‰ª¨Â∞±ÈúÄË¶Å‰ΩøÁî®ÁªÑÂêàÔºöÂßìÂêçÂç°ÂøÖÈ°ªÂ∞ÜÁ∫¢Ëâ≤ËÉåÊôØÔºå‚ÄúHi!‚ÄùÊñáÊú¨ÔºåÂíåÊ†áÁ≠æÂÜÖÂÆπÁªÑÂêàÂú®‰∏ÄËµ∑„ÄÇ
</p>

<p>
‰Ωú‰∏∫ÁªÑ‰ª∂‰ΩúËÄÖÁöÑ‰Ω†ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ <code>&lt;content&gt;</code> ÂÖÉÁ¥†Êù•ÂÆåÊàêÈÉ®‰ª∂ÁöÑÁªÑÂêàÂ∑•‰Ωú„ÄÇ
Ëøô‰∏∫ÈÉ®‰ª∂ÁöÑÂ±ïÁé∞ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÊèíÂÖ•ÁÇπ(insertion point)ÔºåËÄåËØ•ÊèíÂÖ•ÁÇπÂ∞ÜÊåëÈÄâ shadow host ÈáåÁöÑÂÜÖÂÆπÊòæÁ§∫Âà∞ËØ•ÁÇπÊâÄÂú®ÁöÑ‰ΩçÁΩÆ‰∏ä„ÄÇ
</p>

<p>
Â¶ÇÊûúÊàë‰ª¨Êää Shadow DOM ÈáåÁöÑÊ†áËÆ∞ÂÅöÂ¶Ç‰∏ã‰øÆÊîπÔºö
</p>

<pre class="prettyprint"><span class="unchanged"><span class="tag">&lt;template</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"nameTagTemplate"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;style&gt;</span><span class="pln">
  </span><span class="pun">‚Ä¶</span><span class="pln">
</span><span class="tag">&lt;/style&gt;</span></span><span class="pln">
</span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"outer"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"boilerplate"</span><span class="tag">&gt;</span><span class="pln">
    Hi! My name is
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"name"</span><span class="tag">&gt;</span><span class="pln">
    </span><b><span class="tag">&lt;content&gt;&lt;/content&gt;</span></b><span class="pln">
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="unchanged"><span class="tag">&lt;/template&gt;</span></span>
</pre>

<p>
ÂΩìÂßìÂêçÂç°Ê∏≤ÊüìÂêéÔºåshadow host ÁöÑÂÜÖÂÆπ‰æøÊäïÂ∞Ñ(projected)Âà∞ <code>&lt;content&gt;</code> ÂÖÉÁ¥†Âá∫Áé∞ÁöÑÂú∞Êñπ„ÄÇ
</p>

<p>
Áé∞Âú®ÊñáÊ°£ÁöÑÁªìÊûÑÁÆÄÂçï‰∫ÜÔºåÂõ†‰∏∫ÂêçÁß∞Âè™Âá∫Áé∞Âú®‰∫Ü‰∏Ä‰∏™Âú∞Êñπ‚Äî‚ÄîÂ∞±Âú®ÊñáÊ°£Èáå„ÄÇÂ¶ÇÊûúÊÉ≥Êõ¥Êñ∞Áî®Êà∑ÂêçÁß∞Ôºå‰Ω†Âè™ÈúÄÂÜôÔºö
</p>

<pre class="prettyprint"><span class="pln">document</span><span class="pun">.</span><span class="pln">querySelector</span><span class="pun">(</span><span class="str">'#nameTag'</span><span class="pun">).</span><span class="pln">textContent </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Shellie'</span><span class="pun">;</span></pre>

<p>
ËøôÂ∞±Ë∂≥Â§ü‰∫Ü„ÄÇÊµèËßàÂô®‰ºöËá™Âä®Êõ¥Êñ∞Ê∏≤ÊüìÁöÑÂßìÂêçÂç°ÔºåÂõ†‰∏∫Êàë‰ª¨ÊääÂßìÂêçÂç°ÁöÑÂÜÖÂÆπ<b>ÊäïÂ∞Ñ</b>Âà∞‰∫Ü <code>&lt;content&gt;</code> ÂÖÉÁ¥†ÂÜÖ„ÄÇ
</p>

<div id="ex2b">

<p>‰∏ãÈù¢ÊòØ‰ΩøÁî® Shadow DOM ÁöÑÂÆû‰æãÔºö</p>

<div id="ex2bNameTag">Bob</div>

<p>
<label for="ex2bNewName">Êñ∞ÂêçÂ≠óÔºö</label>
<input name="ex2bNewName" value="Shellie">
<button onclick="updateClicked('#ex2bNameTag', 'input[name=ex2bNewName]');">Êõ¥Êñ∞</button>
</p>

<script>
function updateClicked(nameTagSelector, textBoxSelector) {
  var text = document.querySelector(textBoxSelector);
  document.querySelector(nameTagSelector).textContent = text.value;
  text.value = '';
  text.focus();
}
</script>


<script>
(function () {
  if (!window.HTMLTemplateElement ||
      !HTMLElement.prototype.webkitCreateShadowRoot) {
    remove('#ex2b');
    return;
  }

  var shadow = document.querySelector('#ex2bNameTag').webkitCreateShadowRoot();
  var template = document.querySelector('#ex2bNameTagTemplate');
  shadow.appendChild(template.content);
  template.remove();
})();
</script>
</div>


<p>
Êàë‰ª¨ÂÆûÁé∞‰∫ÜÂàÜÁ¶ªÂÜÖÂÆπÂíåÂ±ïÁé∞ÁöÑÁõÆÁöÑ„ÄÇ<b>ÂÜÖÂÆπÂú®ÊñáÊ°£ÂÜÖÔºõÂ±ïÁé∞Âú® Shadow DOM Èáå„ÄÇ</b>
ÂΩìÈúÄË¶ÅÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºåÊµèËßàÂô®‰ºöËá™Âä®‰øùÊåÅÂÆÉ‰ª¨ÁöÑÂêåÊ≠•„ÄÇ
</p>

<h3 id="toc-separation-profit">Á¨¨‰∏âÊ≠•ÔºöÁ¶èÂà©</h3>

<p>
ÈÄöËøáÂàÜÁ¶ªÂÜÖÂÆπÂíåÂ±ïÁé∞ÔºåÊàë‰ª¨ÂèØ‰ª•ÁÆÄÂåñÊìç‰ΩúÂÜÖÂÆπÁöÑ‰ª£Á†Å‚Äî‚ÄîÂú®ÂßìÂêçÂç°ÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰ª£Á†ÅÂè™ÈúÄË¶ÅÂíåÂåÖÂê´‰∏Ä‰∏™ <code>&lt;div&gt;</code> Ê†áÁ≠æÁöÑÁÆÄÂçïÁªìÊûÑÊâì‰∫§ÈÅìÔºåËÄå‰∏çÂøÖÊìç‰ΩúÂ§ö‰∏™Ê†áÁ≠æ„ÄÇ
</p>

<p>
Â¶ÇÊûúÊ≠§Êó∂Êàë‰ª¨‰øÆÊîπÂ±ïÁé∞ÔºåÂ∞±‰∏çÁî®Âä®‰ªª‰Ωï‰ª£Á†Å‰∫ÜÔºÅ
</p>

<p>
ÊØîÊñπËØ¥ÔºåÊàë‰ª¨ÊÉ≥Â∞ÜÂßìÂêçÂç°Êú¨Âú∞Âåñ„ÄÇÂõ†‰∏∫ÂÆÉ‰ªçÁÑ∂ÊòØ‰∏Ä‰∏™ÂßìÂêçÂç°ÔºåÊâÄ‰ª•ÂÆÉÂú®ÊñáÊ°£‰∏≠ÁöÑËØ≠‰πâÂÜÖÂÆπÊ≤°ÊúâÊîπÂèòÔºö
</p>

<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"nameTag"</span><span class="tag">&gt;</span><span class="pln">Bob</span><span class="tag">&lt;/div&gt;</span></pre>

<p>
ËÆæÁΩÆ shadow root ÁöÑ‰ª£Á†Å‰øùÊåÅ‰∏çÂèò„ÄÇÂè™ÊòØÊîæËøõ shadow root ‰∏≠ÁöÑÂÜÖÂÆπÂèò‰∫ÜÔºö
</p>

<pre class="prettyprint"><span class="tag">&lt;template</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"nameTagTemplate"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;style&gt;</span><span class="pln">
</span><span class="pun">.</span><span class="pln">outer </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">border</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2px</span><span class="pln"> solid pink</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">border-radius</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1em</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">background</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">url</span><span class="pun">(</span><span class="str">sakura.jpg</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">font-size</span><span class="pun">:</span><span class="pln"> </span><span class="lit">20pt</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">width</span><span class="pun">:</span><span class="pln"> </span><span class="lit">12em</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">height</span><span class="pun">:</span><span class="pln"> </span><span class="lit">7em</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">text-align</span><span class="pun">:</span><span class="pln"> center</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">font-family</span><span class="pun">:</span><span class="pln"> sans-serif</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">font-weight</span><span class="pun">:</span><span class="pln"> bold</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="pun">.</span><span class="pln">name </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">font-size</span><span class="pun">:</span><span class="pln"> </span><span class="lit">45pt</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">font-weight</span><span class="pun">:</span><span class="pln"> normal</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">margin-top</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.8em</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">padding-top</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.2em</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="tag">&lt;/style&gt;</span><span class="pln">
</span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"outer"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"name"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;content&gt;&lt;/content&gt;</span><span class="pln">
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
  „Å®Áî≥„Åó„Åæ„Åô„ÄÇ
</span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;/template&gt;</span></pre>

<p>
Áé∞Âú®Êàë‰ª¨Êúâ‰∫Ü‰∏Ä‰∏™Êó•ÊñáÁöÑÂßìÂêçÂç°Ôºö
</p>

<div id="ex3a">

<div id="ex3aNameTag">Bob</div>

<p>
<label for="ex3aNewName">Êñ∞ÂêçÂ≠óÔºö</label>
<input name="ex3aNewName" value="Âü∫Â≠ê">
<button onclick="updateClicked('#ex3aNameTag', 'input[name=ex3aNewName]');">Êõ¥Êñ∞</button>
</p>



</div>

<script>
(function () {
  if (!window.HTMLTemplateElement ||
      !HTMLElement.prototype.webkitCreateShadowRoot) {
    remove('#ex3a');
    document.write('<img src="SS4.png" alt="A name tag with a watercolor painting of cherry blossoms on it.">');
    return;
  }
  var shadow = document.querySelector('#ex3aNameTag').webkitCreateShadowRoot();
  var template = document.querySelector('#ex3aNameTagTemplate');
  shadow.appendChild(template.content);
  template.remove();
})();
</script>

<p class="small-notice">
<a href="http://www.flickr.com/photos/mikedowman/5621169045/">ËÉåÊôØÂõæÁâáÊù•Ëá™‰∫é Mike DowmanÔºå</a> Âü∫‰∫é Creative Commons license ÈáçÁî®„ÄÇ
</p>

<p>
Âú®ÂΩì‰ªäÁöÑ web ÁéØÂ¢É‰∏ãËøôÊòØ‰∏Ä‰∏™Â∑®Â§ßÁöÑËøõÊ≠•ÔºåÂõ†‰∏∫Êõ¥Êñ∞ÂêçÂ≠óÁöÑ‰ª£Á†ÅÂèØ‰ª•‰æùËµñ‰∫éÁÆÄÂçï‰∏î‰∏ÄËá¥ÁöÑ<em>ÁªÑ‰ª∂</em>ÁöÑÁªìÊûÑÔºå
<strong>ËÄåÊó†ÈúÄÁü•ÊôìÁî®‰∫éÊ∏≤ÊüìÁöÑÁªìÊûÑ„ÄÇ</strong> ÊØîÂ¶ÇËØ¥‰ªéÊ∏≤ÊüìÁöÑËßíÂ∫¶ËÄÉËôëÔºåÂú®Ëã±Êñá‰∏≠ÂêçÁß∞Â∫îËØ•Âá∫Áé∞Âú®Á¨¨‰∫åË°å(Âú® ‚ÄúHi! My name is‚Äù ‰πãÂêé)Ôºå‰ΩÜÊòØÂú®Êó•Êñá‰∏≠ÈúÄË¶ÅÂá∫Áé∞Âú®Á¨¨‰∏ÄË°å(Âú® ‚Äú„Å®Áî≥„Åó„Åæ„Åô‚Äù ‰πãÂâç)„ÄÇ‰ªéÊõ¥Êñ∞ÂêçÁß∞ÁöÑËßíÂ∫¶Êù•ËØ¥ÔºåËøô‰∏™Âå∫Âà´ÂØπ‰∫éËØ≠‰πâÊ≤°Êúâ‰ªª‰ΩïÊÑè‰πâÔºåÂõ†Ê≠§ÂêçÁß∞Êõ¥Êñ∞‰ª£Á†ÅÂπ∂‰∏çÈúÄË¶Å‰∫ÜËß£Ëøô‰∫õÁªÜËäÇ„ÄÇ
</p>

<h2 id="toc-projection">È¢ùÂ§ñÁ¶èÂà©ÔºöÈ´òÁ∫ßÊäïÂ∞Ñ</h2>

<p>
Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå<code>&lt;content&gt;</code> ÂÖÉÁ¥†ÊåëÈÄâ‰∫Ü shadow host ÁöÑÊâÄÊúâÂÜÖÂÆπ„ÄÇÈÄöËøá‰ΩøÁî®
<span class="attribute">select</span> ÁâπÊÄßÔºå‰Ω†ÂèØ‰ª•ÊéßÂà∂ content ÂÖÉÁ¥†ÊäïÂ∞ÑÁöÑÂÜÖÂÆπ„ÄÇ‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®Â§ö‰∏™ content ÂÖÉÁ¥†„ÄÇ
</p>

<p>
ÊØîÂ¶ÇËØ¥ÔºåÂ¶ÇÊûú‰Ω†Êúâ‰∏Ä‰∏™ÂåÖÂê´Â¶Ç‰∏ãÂÜÖÂÆπÁöÑÊñáÊ°£Ôºö
</p>

<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"nameTag"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"first"</span><span class="tag">&gt;</span><span class="pln">Bob</span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;div&gt;</span><span class="pln">B. Love</span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"email"</span><span class="tag">&gt;</span><span class="pln">bob@</span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span></pre>

<p>
shadow root ‰ΩøÁî® CSS ÈÄâÊã©Âô®Êù•ÈÄâÊã©ÁâπÂÆöÂÜÖÂÆπÔºö
</p>

<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="kwd">background</span><span class="pun">:</span><span class="pln"> purple</span><span class="pun">;</span><span class="pln"> </span><span class="kwd">padding</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1em</span><span class="pun">;</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="kwd">color</span><span class="pun">:</span><span class="pln"> red</span><span class="pun">;</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;content</span><span class="pln"> </span><b><span class="atn">select</span><span class="pun">=</span><span class="atv">".first"</span></b><span class="tag">&gt;&lt;/content&gt;</span><span class="pln">
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="kwd">color</span><span class="pun">:</span><span class="pln"> yellow</span><span class="pun">;</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;content</span><span class="pln"> </span><b><span class="atn">select</span><span class="pun">=</span><span class="atv">"div"</span></b><span class="tag">&gt;&lt;/content&gt;</span><span class="pln">
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="kwd">color</span><span class="pun">:</span><span class="pln"> blue</span><span class="pun">;</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;content</span><span class="pln"> </span><b><span class="atn">select</span><span class="pun">=</span><span class="atv">".email"</span><span class="tag">&gt;</span></b><span class="tag">&lt;/content&gt;</span><span class="pln">
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span></pre>

<p class="notice"><b>Ê≥®ÊÑèÔºö</b> <span class="attribute">select</span> Âè™ËÉΩÈÄâÊã© host ËäÇÁÇπÁöÑÁõ¥Êé•Â≠êÂÖÉÁ¥†„ÄÇ‰πüÂ∞±ÊòØËØ¥Ôºå‰Ω†‰∏çËÉΩÈÄâÊã©Âêé‰ª£ÂÖÉÁ¥†(‰æãÂ¶Ç <code>select="table tr"</code>)„ÄÇ</p>

<p>
<code>&lt;div class="email"&gt;</code> ÂÖÉÁ¥†ÂêåÊó∂Ë¢´ <code>&lt;content select="div"&gt;</code> Âíå <code>&lt;content
select=".email"&gt;</code> ÂÖÉÁ¥†ÊâÄÂåπÈÖç„ÄÇÈÇ£ Bob ÁöÑÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄ‰ºöÂá∫Áé∞Â§öÂ∞ëÊ¨°ÔºåÈÉΩÊòØ‰ªÄ‰πàÈ¢úËâ≤Ôºü
</p>

<div id="ex4a">

<div id="ex4aNameTag">
  <div class="first">Bob</div>
  <div>B. Love</div>
  <div class="email">bob@</div>
</div>


</div>

<script>
(function () {
  if (!window.HTMLTemplateElement ||
      !HTMLElement.prototype.webkitCreateShadowRoot) {
    remove('#ex4a');
    document.write('<img src="SS5.png" alt="The rendered result. Bob‚Äôs email appears in yellow." id="ex4a">');
    return;
  }
  var shadow = document.querySelector('#ex4aNameTag').webkitCreateShadowRoot();
  var template = document.querySelector('#ex4aNameTagTemplate');
  shadow.appendChild(template.content);
  template.remove();
})();
</script>

<p>
Á≠îÊ°àÊòØÔºöBob ÁöÑÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄ‰ªÖÊòæÁ§∫‰∏ÄÊ¨°ÔºåÂπ∂‰∏îÊòØÈªÑËâ≤ÁöÑ„ÄÇ
</p>

<p>
‰∏∫‰ªÄ‰πà‰ºöËøôÊ†∑ÔºüÈÇ£‰∫õ‰∫ÜËß£ Shadow DOM ÂéüÁêÜÁöÑ‰∫∫‰ª¨ÈÉΩÁü•ÈÅìÔºåÊääÊúÄÁªàÊ∏≤ÊüìÂú®Â±èÂπï‰∏äÁöÑÂÜÖÂÆπÊûÑÂª∫Êàê‰∏ÄÊ£µÊ†ëÔºåÂ∞±ÂÉè‰∏æÂäû‰∏Ä‰∏™ÁõõÂ§ßÁöÑËàû‰ºö„ÄÇ
<strong>content ÂÖÉÁ¥†Â∞±ÊòØÂ∞ÜÊñáÊ°£‰∏≠ÁöÑÂÜÖÂÆπÈÇÄËØ∑Âà∞ Shadow DOM Ê∏≤ÊüìËàû‰ºöÁöÑËØ∑Êü¨„ÄÇ</strong>
Ëøô‰∫õËØ∑Êü¨ÊåâÈ°∫Â∫èÂèëÊîæÔºõË∞ÅËÉΩÊî∂Âà∞ÈÇÄËØ∑ÂèñÂÜ≥‰∫éËØ∑Êü¨ÁöÑÂú∞ÂùÄ(Âç≥ <span class="attribute">select</span> ÁâπÊÄß„ÄÇ)Ôºå
‰∏ÄÊó¶Êî∂Âà∞ÈÇÄËØ∑Ôºå‰æø‰ºöÊé•ÂèóËØ∑Êü¨(ÊúâË∞Å‰∏ç‰ºöÂë¢ÔºüÔºÅ)Á´ãÂç≥Âä®Ë∫´„ÄÇÂ¶ÇÊûúÊé•‰∏ãÊù•ÂèàÊúâ‰∏ÄÂ∞ÅËØ∑Êü¨ÂèëÈÄÅÂà∞ËØ•Âú∞ÂùÄÔºåÂèØÁé∞Âú®ÂÆ∂ÈáåÊ≤°‰∫∫ÔºåËøô‰∏™Ëàû‰ºö‰πüÂ∞±Âéª‰∏ç‰∫Ü‰∫Ü„ÄÇ
</p>

<p>
Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå<code>&lt;div class="email"&gt;</code> ÂêåÊó∂ÂåπÈÖç <code>div</code> ÈÄâÊã©Âô®Âíå <code>.email</code> ÈÄâÊã©Âô®Ôºå‰ΩÜÂõ†‰∏∫Âê´Êúâ <code>div</code> ÈÄâÊã©Âô®ÁöÑ content ÂÖÉÁ¥†Âú®ÊñáÊ°£‰∏≠ÁöÑ‰ΩçÁΩÆÈù†ÂâçÔºå
<code>&lt;div class="email"&gt;</code> ‰æøÂéª‰∫ÜÈªÑËâ≤Ëàû‰ºöÔºåËøôÊ†∑Â∞±Ê≤°‰∫∫ÂéªËìùËâ≤Ëàû‰ºö‰∫Ü„ÄÇ
</p>

<p>
Â¶ÇÊûúÊúâÂÜÖÂÆπ<em>Ê≤°Êúâ</em>Ë¢´ÈÇÄËØ∑ÂèÇÂä†‰ªª‰ΩïËàû‰ºöÔºåÈÇ£ÂÆÉÂ∞±‰∏ç‰ºöÊ∏≤Êüì„ÄÇÁ¨¨‰∏Ä‰∏™‰æãÂ≠ê‰∏≠ÁöÑ ‚ÄúHello, world‚Äù ÊñáÊú¨‰æøÂ±û‰∫éËøôÁßçÊÉÖÂÜµ„ÄÇ
ËøôÂØπ‰∫éÂΩì‰Ω†ÊÉ≥ÂΩªÂ∫ï‰øÆÊîπÊ∏≤ÊüìÂÜÖÂÆπÊó∂ÂçÅÂàÜÊúâÊïàÔºöÂú®ÊñáÊ°£‰∏≠‰π¶ÂÜôËØ≠‰πâÊ®°ÂûãÔºåÂÆÉËÉΩÂ§üË¢´È°µÈù¢‰∏≠ÁöÑËÑöÊú¨ËÆøÈóÆÂà∞Ôºå‰ΩÜÊòØÂü∫‰∫éÊ∏≤ÊüìÂéüÂõ†ÂøÖÈ°ªÂ∞ÜÂÆÉÈöêËóèËµ∑Êù•Ôºå‰ΩøÁî® JavaScript Â∞ÜÂÆÉ‰∏é Shadow DOM ‰∏≠ÁöÑ‰∏Ä‰∏™ÂÆåÂÖ®‰∏çÂêåÁöÑÊ∏≤ÊüìÊ®°ÂûãËøõË°åÂÖ≥ËÅî„ÄÇ
</p>

<p>
‰∏æ‰∏™‰æãÂ≠êÔºåHTML Êúâ‰∏Ä‰∏™‰∏çÈîôÁöÑÊó•ÊúüÈÄâÊã©Âô®„ÄÇÂ¶ÇÊûú‰Ω†ÂÜô‰∏ã <code>&lt;input
type="date"&gt;</code> ‰Ω†Â∞ÜÂæóÂà∞‰∏Ä‰∏™ÁÆÄÊ¥ÅÁöÑÂºπÂá∫ÂºèÊó•ÂéÜ„ÄÇ‰ΩÜÂ¶ÇÊûú‰Ω†ÊÉ≥ËÆ©Áî®Êà∑‰∏∫‰ªñ‰ª¨ÁöÑ<i>ÁîúÁÇπ</i>
Â≤õÊóÖË°åÈÄâÊã©‰∏ÄÊÆµÊó•Êúü(‰Ω†Áü•ÈÅìÂêó‚Ä¶‚Ä¶Â≤õ‰∏äÊúâÁ∫¢Ëë°ËêÑËó§ÂÅöÁöÑÂêäÂ∫ä„ÄÇ)ÔºåÊñáÊ°£Ë°®Èù¢‰∏äÊòØËøô‰πàÂÜôÁöÑÔºö
</p>

<pre class="prettyprint"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"dateRangePicker"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;label</span><span class="pln"> </span><span class="atn">for</span><span class="pun">=</span><span class="atv">"start"</span><span class="tag">&gt;</span><span class="pln">Start:</span><span class="tag">&lt;/label&gt;</span><span class="pln">
  </span><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"date"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"startDate"</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"start"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;br&gt;</span><span class="pln">
  </span><span class="tag">&lt;label</span><span class="pln"> </span><span class="atn">for</span><span class="pun">=</span><span class="atv">"end"</span><span class="tag">&gt;</span><span class="pln">End:</span><span class="tag">&lt;/label&gt;</span><span class="pln">
  </span><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"date"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"endDate"</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"end"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span></pre>

<p>
‰ΩÜÂÆûÈôÖ‰∏ä‰ºöÂàõÂª∫‰∏Ä‰∏™ Shadow DOMÔºåÂú®ÈáåÈù¢‰ΩøÁî®Ë°®Ê†ºÁîüÊàê‰∏Ä‰∏™ËÉΩÂ§üÈ´ò‰∫ÆÊó•ÊúüËåÉÂõ¥ÁöÑÊó•ÂéÜ„ÄÇ
ÂΩìÁî®Êà∑ÁÇπÂáªÊó•ÂéÜ‰∏≠ÁöÑÊó•ÊúüÔºåÁªÑ‰ª∂‰ºöÊõ¥Êñ∞ËæìÂÖ•Ê°ÜÁöÑËµ∑ÂßãÊó•ÊúüÂíåÁªìÊùüÊó•ÊúüÔºõÂΩìÁî®Êà∑Êèê‰∫§Ë°®ÂçïÔºå‰∏§‰∏™ËæìÂÖ•Ê°ÜÂÖÉÁ¥†ÁöÑÂÄºÂ∞±‰ºöË¢´Êèê‰∫§„ÄÇ
</p>

<p>
‰Ω†ÂèØËÉΩ‰ºöÂ•áÊÄ™Ôºå‰∏∫‰ªÄ‰πàÊàëÊòéÁü•ÈÅì label ÂÖÉÁ¥†‰∏ç‰ºöË¢´Ê∏≤ÊüìËøòÂéªÂÜôÂÆÉÂë¢Ôºü
ÂéüÂõ†Âú®‰∫éÂ¶ÇÊûúÁî®Êà∑ÈÄöËøá‰∏Ä‰∏™‰∏çÊîØÊåÅ Shadow DOM ÁöÑÊµèËßàÂô®Êù•ËÆøÈóÆË°®ÂçïÔºå
ÈÇ£‰πàË°®ÂçïËøòÊòØ‰øùËØÅÂèØÁî®ÁöÑÔºåÂè™ÊòØ‰∏çÂ§™ÊºÇ‰∫Æ„ÄÇÊúÄÁªàÁúãËµ∑Êù•ÂèØËÉΩÊòØËøôÊ†∑ÁöÑÔºö
</p>

<div class="dateRangePicker">
  <label for="start">Start:</label>
  <input type="date" name="startDate" id="start">
  <br>
  <label for="end">End:</label>
  <input type="date" name="endDate" id="end">
</div>

<h2 id="toc-conclusion">‰Ω†ÈÄöËøá‰∫Ü Shadow DOM 101</h2>

<p>
ËøôÈáå‰ªãÁªçÁöÑÊòØ Shadow DOM ÁöÑÂü∫Á°Ä‚Äî‚Äî‰Ω†ÈÄöËøá‰∫Ü Shadow DOM 101ÔºÅ
‰Ω†ÂèØ‰ª•‰ΩøÁî® Shadow DOM ÂÆûÁé∞Êõ¥Â§ö‰∫ãÊÉÖÔºåÊØîÊñπËØ¥Âú®‰∏Ä‰∏™ shadow host ÂÜÖ‰ΩøÁî®Â§ö‰∏™ shadow DOMÔºå
ÊàñÊòØÂá∫‰∫éÂ∞ÅË£ÖÁöÑÁºòÊïÖÊù•ÂµåÂ•ó shadow DOMÔºåÊàñÊòØ‰ΩøÁî® Model-Driven Views (MDV) Âíå Shadow DOM Êù•Êû∂ÊûÑÈ°µÈù¢„ÄÇ
ËÄå‰∏î Web ÁªÑ‰ª∂ÂèØ‰∏ç‰ªÖ‰ªÖÂåÖÂê´ Shadow DOM„ÄÇ‰ΩøÁî® Web ÁªÑ‰ª∂ÁöÑÂè¶‰∏ÄÈÉ®ÂàÜÔºöËá™ÂÆö‰πâÂÖÉÁ¥†Ôºå‰Ω†Â∞±ÂèØ‰ª•Áî®Â£∞ÊòéÁöÑÊñπÂºèÊù•ËÆæÁΩÆÈÉ®‰ª∂ÁöÑ Shadow DOMÔºåËÄå‰∏çÂøÖÂéªÂÜôËÑöÊú¨‰∫Ü„ÄÇ
</p>

<p>
Êàë‰ª¨Â∞ÜÂú®ÂêéÁª≠ÊñáÁ´†‰∏≠Ëß£ÈáäËøô‰∫õÂÜÖÂÆπ„ÄÇÂ•Ω‰∫ÜÔºåËØ∑Âú®<a href="https://plus.google.com/103330502635338602217/posts">Google+ ‰∏äÂÖ≥Ê≥® Web ÁªÑ‰ª∂Âêß„ÄÇ</a>
</p>

<p class="small-notice">
ÊÑüË∞¢ <a href="http://Robing.github.io/profiles/#ericbidelman">Eric BidelmanÔºå</a>Darin
FisherÔºåDimitri GlazkovÔºåAlex KomoroskeÔºåAlex RussellÔºåÂíå <a href="http://Robing.github.io/profiles/#paulirish">Paul Irish</a> ÂØπÊú¨ÊïôÁ®ãÊó©ÊúüÁâàÊú¨ÊèêÂá∫ÁöÑÂª∫ËÆÆ„ÄÇ
</p>


      </div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Css3 Animation]]></title>
    <link href="http://Robing.github.io/blog/2014/05/15/css3-animation/"/>
    <updated>2014-05-15T22:28:04+08:00</updated>
    <id>http://Robing.github.io/blog/2014/05/15/css3-animation</id>
    <content type="html"><![CDATA[<h3>Introduction</h3>




<p>Ladies and gentlemen, it is the second decade of the second millennium and we are still kicking around the same 2D interface we got three decades ago. Sure, Apple debuted a few apps for OSX 10.7 that have a couple more 3D flourishes, and Microsoft has had thatFlip 3Dfor a while. But c‚Äômon, 2011 is right around the corner. That‚ÄôsTwenty Elevenfolks. Where is our 3D virtual reality? By now, we should be zipping around theMetaverse in super-sonic motorbikes.</p>




<p>Granted, the capability of rendering complex 3D environments has been present for years. On the Web, there already are number of solutions ‚ÄìFlash,three.jsin canvas, and eventually WebGL. And finally, we meager front-end developers have our own three-dimensional jewel: CSS 3D Transforms!</p>




<h3>Rationale</h3>




<p>Like a beautiful jewel, 3D transform can be dazzling, a true spectacle to behold. But before we start tacking 3D diamonds and rubies to our compositions like Liberace‚Äôs tailor, we owe it to our users to ask what can they benefit from this awesome feature.</p>




<p>The entire application does not, and should not, take advantage of 3D. CSS was built to style documents, not generate explorable environments. I fail to find a benefit to filling out a web form that can be accessed by swiveling my viewport to the Sign-Up Room (although there have been proposals to make the Web just that). However, there is plenty of opportunity to use 3D transformsin betweenthe interface, via transitions.</p>




<p>Take for instance the Weather App on the iPhone. The application uses two views: a details view and an options view. Switching between these two views is done with a 3D flip transition. This affords the user that the interface has two and only two views, as they can only exist on either side of the same plane.</p>




<!-- more -->




<p>Also consider slide cycle plugins. When you‚Äôre at the last slide, what cues tip-off the user that the advancing will re-start the cycle at the first? A better paradigm can be used with a 3D transform, where the slides are placed side by side one another in a circle in 3D space. In that arrangement, the last slide logically comes before the first.</p>




<p>3D transforms are more than just eye candy. We can also use them to solve dilemmas and make our applications more intuitive.</p>




<p>Current Support Environment</p>




<p>The CSS 3D transforms modulehas been out in the wild for several year now. While only Apple-produced browsers like Safari and Mobile Safari originally supported it, support has been added by Google Chrome and Mozilla Firefox. View the chart oncaniuse.com/#feat=transforms3dto check the latest support environment across the browser landscape.</p>




<p>This all adds up to a bit of a challenge for those of us excited for 3D transforms. I‚Äôll give it to you straight: missing that dimension of depth can make degradation a bit ungraceful. Unless the transform is relatively simple and holds up in non-3D-supporting browsers, you‚Äôll most likely have to design another solution. But what‚Äôs another hurdle in a steeplechase? We web folk have had our mettle tested for years. We‚Äôre galvanized for devising multiple solutions.</p>




<p>Here‚Äôs the part of the article where I mentionModernizr, and you brush over it because you‚Äôve read this part of an article a hundreds of times before. But seriously, it‚Äôs the best way to test for CSS 3D transform support. Use it.</p>




<p>Even with these difficulties mounted up, trying out 3D transforms today is the right move. The CSS 3D transforms module was developed by the same team at Apple who produced theCSS 2D transformsandanimation. Both specifications have since been adopted by Mozilla and Opera. Transforming three-dimensionally now will guarantee you‚Äôll be ahead of the game when the other browsers catch up.</p>




<p>The choice is yours. You can make excuses and poo-poo 3D transforms because they‚Äôre too hard and only snobby Apple fans will see them today. Or, with atip of the fedora to Mr. Andy Clarke, you can get hardboiled and start designing with the best features out there right this instant.</p>




<p>So I bid you,in the words of the eternal Optimus Prime‚Ä¶</p>




<p>Transform and roll out.</p>




<p>Let‚Äôs get coding.</p>

]]></content>
  </entry>
  
</feed>
