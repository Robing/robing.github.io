
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Rainer's blog</title>
  <meta name="author" content="Robin">

  
  <meta name="description" content="Web Components usher in a new era of web development based on encapsulated and interoperable custom elements that extend HTML itself.
">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://Robing.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Rainer's blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <!-- <h1><a href="/">Rainer's blog</a></h1> -->
  <h1>Rainer's blog</h1>
  
    <h2>Focus on Html5 css3 mobile development</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:Robing.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/28/web-component/">Web Component</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-28T16:52:47+08:00" pubdate data-updated="true">Jul 28<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/07/28/web-component/#disqus_thread"
             data-disqus-identifier="http://Robing.github.io/blog/2014/07/28/web-component/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Web Components usher in a new era of web development based on encapsulated and interoperable custom elements that extend HTML itself.</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/20/history/">浏览器的历史记录</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-20T14:58:25+08:00" pubdate data-updated="true">Jun 20<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/06/20/history/#disqus_thread"
             data-disqus-identifier="http://Robing.github.io/blog/2014/06/20/history/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div>
    <h3>老的History概览</h3>
    <p>
        window对象的history是一组包含最近访问过的url的数组，但是出于安全和用户隐私方面的考虑，脚本不能真正的访问这组数组原色。不过它提供了以下3个方法：
        <ul class="txtlist">
            <li>back(): 在历史记录中后退，等同于浏览器的后退按钮</li>
            <li>forword(): 在历史记录中前进，等同于浏览器的前进按钮</li>
            <li>go(): 通过指定一个特定的数值（相对于当前页，当前页是0，如果是正值，就前进几个记录，如果是负值就后退几个历史记录）；例如go(2)就是向前移动2页，go(-1)就是后退一页，go(0)就是刷新当前页面</li>
        </ul>
        <p>你可以通过length属性查看history数组中存放了多少历史记录</p>
    </p>
    <h3>HTML5新增方法</h3>
    <p>
        HTML5引进了history.pushState()方法和history.replaceState()方法，它们允许你逐条地添加和修改历史记录条目。这些方法可以协同window.onpopstate事件一起工作。
    </p>
    <h3 id="pushState().E6.96.B9.E6.B3.95">pushState()方法</h3>
    <p>pushState()有三个参数：一个状态对象、一个标题（现在会被忽略），一个可选的URL地址。下面来单独考察这三个参数的细节：</p>
    <ul class="txtlist">
      <li>
        <p><strong>状态对象（state object）</strong> — 一个JavaScript对象，与用pushState()方法创建的新历史记录条目关联。无论何时用户导航到新创建的状态，popstate事件都会被触发，并且通过事件对象的state属性都可以访问到找个状态对象。</p>
        <p>任何可序列化的对象都可以被当做状态对象。FireFox浏览器会把状态对象保存到用户的硬盘，这样它们就能在用户重启浏览器之后被还原，我们强行限制状态对象的大小为640k。如果你向pushState()方法传递了一个超过该限额的状态对象，该方法会抛出异常。如果你需要存储很大的数据，建议使用sessionStorage或localStorage。</p>
      </li>
      <li>
        <p><strong>标题（title）</strong> — FireFox浏览器目前会忽略该参数，虽然以后可能会用上。考虑到未来可能会对该方法进行修改，传一个空字符串会比较安全。或者，你也可以传入一个简短的标题，标明将要进入的状态。</p>
      </li>
      <li>
        <p><strong>地址（URL）</strong> — 新的历史记录条目的地址。浏览器不会在调用pushState()方法后加载该地址，但之后，可能会试图加载，例如用户重启浏览器。新的URL不一定是绝对路径；如果是相对路径，它将以当前URL为基准；传入的URL与当前URL应该是同源的，否则，pushState()会抛出异常。该参数是可选的；不指定的话则为文档当前URL。</p>
      </li>
    </ul>
    </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/06/20/history/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/03/using-web-notifications/">Using Web Notifications</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-03T16:46:58+08:00" pubdate data-updated="true">Jun 3<span>rd</span>, 2014</time>
        
           | <a href="/blog/2014/06/03/using-web-notifications/#disqus_thread"
             data-disqus-identifier="http://Robing.github.io/blog/2014/06/03/using-web-notifications/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div id="wiki-content" class="column-main wiki-column text-content">
    <!-- just the article content -->
    <article id="wikiArticle">
        <h2 id="Summary">Summary</h2>
        <p>The Web Notifications API allows a web page to send notifications that are displayed outside the page at the system level. This allows web apps to send information to a user even if the application is idle. One of the main obvious use cases is a webmail application that would notify the user each time a new e-mail is received, even if the user is doing something else with another application.</p>
        <p>To display notification you need to first request the appropriate permission and then instantiate a
            <a href="/en-US/docs/Web/API/Notification" title="The Notification object is used to configure and display desktop notifications to the user.">Notification</a>object:
        </p>
        
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>            <span class="nx">Notification</span><span class="p">.</span><span class="nx">requestPermission</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">status</span><span class="p">);</span> <span class="c1">// notifications will only be displayed if &quot;granted&quot;</span>
</span><span class='line'>                <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Notification</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">body</span><span class="o">:</span> <span class="s2">&quot;notification body&quot;</span><span class="p">});</span> <span class="c1">// this also shows the notification</span>
</span><span class='line'>            <span class="p">});</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>

        <h2 id="Requesting_permission">Requesting permission</h2>
        <h3 id="Web_content">Web content</h3>
        <p>Before an app is able to send a notification, the user must grant the application the right to do so. This is a common requirement when an API tries to interact with something outside a web page. This guarantees to avoid notification &#8220;spam&#8221; for the well-being of the user.</p>
        <p>An application that needs to send a notification can check the current permission status thanks to the
            <a href="/en-US/docs/Web/API/Notification.permission" title="The permission property indicates the current permission granted by the user about web notification for the current application.">Notification.permission</a>read only property. It can have one of three possible values:</p>
        <ul class="txtlist">
            <li>default: the user didn&#8217;t give any permission yet (and therefore no notification will be displayed to the user).</li>
            <li>granted: the user explicitly accepted to be notified by the application.</li>
            <li>denied: the user explicitly refused to be notified by the application.</li>
        </ul>
        <div class="note">
            <p><strong>Note:</strong>Chrome and Safari do not implement thepermissionproperty yet.</p>
        </div>
        <p>If the permission is not granted, the application has to use the<a href="/en-US/docs/Web/API/Notification.requestPermission" title="The requestPermission static method is used to ask the user for his permission to display a Notification to him.">Notification.requestPermission()</a>method to let the user make a choice. This method accepts a callback function that receives the permission chosen by the user in order to react to it.</p>
        <p>It&#8217;s a common practice to ask for the permission at the initialization of the app:</p>
        
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>            <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">Notification</span><span class="p">.</span><span class="nx">requestPermission</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="c1">// This allows to use Notification.permission with Chrome/Safari</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="nx">Notification</span><span class="p">.</span><span class="nx">permission</span> <span class="o">!==</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                  <span class="nx">Notification</span><span class="p">.</span><span class="nx">permission</span> <span class="o">=</span> <span class="nx">status</span><span class="p">;</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>              <span class="p">});</span>
</span><span class='line'>            <span class="p">});</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>

        <div class="note">
            <p>
                <strong>Note:</strong>Chrome does not allows to call
                <a href="/en-US/docs/Web/API/Notification.requestPermission" title="The requestPermission static method is used to ask the user for his permission to display a Notification to him.">Notification.requestPermission()</a>on theloadevent (see <a class="external external-icon" href="https://code.google.com/p/chromium/issues/detail?id=274284" title="https://code.google.com/p/chromium/issues/detail?id=274284">issue 274284</a>).
            </p>
        </div>
        </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/06/03/using-web-notifications/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/16/shadow-dom-301/">Shadow DOM 三</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-16T12:21:36+08:00" pubdate data-updated="true">May 16<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/05/16/shadow-dom-301/#disqus_thread"
             data-disqus-identifier="http://Robing.github.io/blog/2014/05/16/shadow-dom-301/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="content" id="article-content">
<p>This article discusses more of the amazing things you can do with Shadow DOM! It builds on the concepts discussed in <a href="/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a>
and <a href="/tutorials/webcomponents/shadowdom-201/">Shadow DOM 201</a>.</p>
<p class="tip notice">In Chrome, turn on the &#8220;Enable experimental Web Platform features&#8221; in about:flags to experiment with everything covered in this article.</p>

<h2 id="toc-shadow-multiple">Using multiple shadow roots</h2>

<p>If you&#8217;re hosting a party, it gets stuffy if everyone is crammed into the same room.
You want the option of distributing groups of people across multiple rooms. Elements hosting
Shadow DOM can do this too, that is to say, they can host more than one shadow
root at a time.</p>
<p>Let&#8217;s see what happens if we try to attach multiple shadow roots to a host:</p>
    
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>     <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;example1&quot;</span><span class="nt">&gt;</span>Light DOM<span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;script&gt;</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;#example1&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">root1</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">createShadowRoot</span><span class="p">();</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">root2</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">createShadowRoot</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">root1</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;div&gt;Root 1 FTW&lt;/div&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">root2</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;div&gt;Root 2 FTW&lt;/div&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>  
</span></code></pre></td></tr></table></div></figure>


<div class="demodevtools"> 
<img src="http://rainer.qiniudn.com/stacking.png" title="Attaching multiple shadow trees" alt="Attaching multiple shadow trees" style="width:250px;">
</div>

<div class="demoarea">
  <div id="example1">Light DOM</div>
</div>

<script>
(function() {
var container = document.querySelector('#example1');
var root1 = container.createShadowRoot();
var root2 = container.createShadowRoot();
root1.innerHTML = '<div>Root 1 FTW</div>';
root2.innerHTML = '<div>Root 2 FTW</div>';
})();
</script>

<p class="notice tip">In the DevTools, turn on &#8220;Show Shadow DOM&#8221; to be
  able to inspect ShadowRoots.</p>

<p>What renders is &#8220;Root 2 FTW&#8221;, despite the fact that we had already attached a shadow tree.
This is because the last shadow tree added to a host, wins. It&#8217;s a LIFO stack as
far as rendering is concerned. Examining the DevTools verifies this behavior.</p>
<p class="notice fact">Shadow trees added to a host are stacked in the order they&#8217;re added,
starting with the most recent first. The last one added is the one that renders.</p>

<blockquote class="commentary talkinghead" id="youngest-tree">
The most recently added tree is called the <b>younger tree</b>. Previous trees are called <b>older trees</b>. In this example, <code>root2</code> is the younger tree and  <code>root1</code> is the older tree.
</blockquote>

<p>So what&#8217;s the point of using multiple shadows if only the last is invited to the
rendering party? Enter shadow insertion points.</p>
<h3 id="toc-shadow-insertion">Shadow Insertion Points</h3>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/05/16/shadow-dom-301/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/16/shadow-dom-201/">Shadow DOM 二</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-16T12:16:18+08:00" pubdate data-updated="true">May 16<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/05/16/shadow-dom-201/#disqus_thread"
             data-disqus-identifier="http://Robing.github.io/blog/2014/05/16/shadow-dom-201/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="content" id="article-content">
    <p>This article discusses more of the amazing things you can do with Shadow DOM. It builds on the concepts discussed in <a href="/tutorials/webcomponents/shadowdom/">Shadow DOM 101</a>. If you&#8217;re looking for an introduction, see that article.</p>
    <h2 id="toc-intro">Introduction</h2>
    <p>Let&#8217;s face it. There&#8217;s nothing sexy about unstyled markup. Lucky for us, <a href="http://w3c.github.io/webcomponents/explainer/#acknowledgements">the brilliant folks behind Web Components</a>
        foresaw this and didn&#8217;t leave us hanging. The <a href="http://dev.w3.org/csswg/css-scoping/">CSS Scoping Module</a> defines many options for styling content in a shadow tree.</p>
    <p class="tip notice">In Chrome, turn on the &#8220;Enable experimental Web Platform features&#8221; in about:flags to experiment with everything covered in this article.</p>
    <h2 id="toc-style-scoped">Style encapsulation</h2>
    <p>One of the core features of Shadow DOM is the <a href="http://w3c.github.io/webcomponents/spec/shadow/#shadow-trees">shadow boundary</a>. It has a lot of nice properties, but one of the best is that it provides style encapsulation for free. Stated another way:</p>
    <p class="notice fact">CSS styles defined inside Shadow DOM are scoped to the ShadowRoot. This means styles are encapsulated by default.</p>
    <p>Below is an example. If all goes well and your browser supports Shadow DOM (it does
        <span class="featuresupported no">n&#8217;t</span>!), you&#8217;ll see &#8221;
        <span style="color:red">Shadow DOM</span>&#8221;.</p>
    
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>        <span class="nt">&lt;div&gt;&lt;h3&gt;</span>Light DOM<span class="nt">&lt;/h3&gt;&lt;/div&gt;</span>
</span><span class='line'>        <span class="nt">&lt;script&gt;</span>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">).</span><span class="nx">createShadowRoot</span><span class="p">();</span>
</span><span class='line'>            <span class="nx">root</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;style&gt;h3{ color: red; }&lt;/style&gt;&#39;</span> <span class="o">+</span> <span class="s1">&#39;&lt;h3&gt;Shadow DOM&lt;/h3&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>

    <div class="demoarea none">
        <div id="style-ex-scoped">
            <h3>Light DOM</h3>
        </div>
    </div>

    <script>
    (function() {
        var container = document.querySelector('#style-ex-scoped');
        var root = container.createShadowRoot();
        root.innerHTML = '<style>h3{color: red;}</style><h3>Shadow DOM</h3>';
    })();
    </script>

    <p>There are two interesting observations about this demo:</p>
    <ul>
        <li>There are
            <a onclick=alertMsg() href="#">other h3s on this page</a>, but the only one that matches the h3 selector, and therefore styled red, is the one in the ShadowRoot. Again, scoped styles by default.</li>
        <li>Other styles rules defined on this page that target h3s don&#8217;t bleed into my content. That&#8217;s because
            <strong>selectors don&#8217;t cross the shadow boundary</strong>.</li>
    </ul>
    <script type="text/javascript">
    var alertMsg = function(msg){
        if(msg){
            alert(msg)
        }else{
            len = document.querySelectorAll('h3').length;
            msg = 'There are ' + len + ' <h3> on this page.';
            alert(msg);
        }
        return false;
    }
    </script>
    <p>Moral of the story? We have style encapsulation from the outside world. Thanks Shadow DOM!</p>
    </div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/05/16/shadow-dom-201/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/16/shadow-dom-101/">Shadow DOM 一</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-16T10:09:17+08:00" pubdate data-updated="true">May 16<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/05/16/shadow-dom-101/#disqus_thread"
             data-disqus-identifier="http://Robing.github.io/blog/2014/05/16/shadow-dom-101/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class="content" id="article-content">        
<p></p>

<h2 id="toc-introduction">介绍</h2>

<p>
Web 组件是一系列前沿规范，它：
</p>

<ol>
<li>使得构建部件(widget)成为可能</li>
<li>…重用更为可靠</li>
<li>
…即便后续版本的组件修改了内部实现细节也不会使页面出错。
</li>
</ol>

<p>
这是否意味着你得决定什么时候用 HTML/JavaScript，什么时候用 Web 组件？不！HTML 和 JavaScript 可以制作交互式可视化内容，
部件也是交互式可视化内容。在开发部件的过程中自然而然的就会利用你的 HTML 和 JavaScript 技巧。Web 组件标准就是以此为目的而设计的。
</p>

<blockquote class="commentary talkinghead">
若是使用别的技术来构建部件却也说不通。比如，我就肯定不会推荐你用 <code>&lt;canvas&gt;</code> 来写部件。它确实可靠——如果你修改绘制的内容也不会破坏页面——但它对可访问性(accessibility)，索引(indexing)，组合(composition)，分辨率无关(resolution independence)都不友好。
</blockquote>

<p>
但有个根本问题，导致 HTML 和 JavaScript 构建出来的部件难以使用：部件中的 DOM 树并没有封装起来。
封装的缺乏意味着文档中的样式表会无意中影响部件中的某些部分；
JavaScript 可能在无意中修改部件中的某些部分；你书写的 ID 也可能会把部件内部的 ID 覆盖。
</p>

<blockquote class="commentary">
缺乏封装的一个明显缺点在于：如果你更新了库或者部件的 DOM 更改了内部细节，你的样式和脚本就可能在不经意间遭到破坏。
</blockquote>

<p>
Web 组件由四部分组成：
</p>

<ol>
<li><a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/templates/index.html">Templates</a></li>
<li><a href="http://www.w3.org/TR/shadow-dom/">Shadow
DOM</a></li>
<li><a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/custom/index.html">Custom
Elements</a></li>
<li><a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/explainer/index.html#external-custom-elements-and-decorators">Packaging</a></li>
</ol>

<p>
<b>Shadow DOM</b> 解决了 DOM 树的封装问题。Web 组件的四部分被设计成配合工作，但你也可以选择 Web 组件中的某个部分来使用。该教程将教会你如何使用 Shadow DOM。
</p>

<p class="notice">
<b>注意：</b> Chrome 25+ 支持 Shadow DOM，但 API 需要加 <code>webkit</code> 前缀。 在 Chrome 的最新版本中增加了无前缀的 API，可以通过开启 <code>about:flags</code> 下的 &#8220;实验性网络平台功能&#8221;来使用。
</p>

<h2 id="toc-hello-world">Hello, Shadow World</h2>

<p>
有了 Shadow DOM，元素就可以和一个新类型的节点关联。这个新类型的节点称为 <b>shadow root。</b>与一个 shadow root 关联的元素称作一个 <b>shadow host。</b>shadow host 的内容不会渲染；shadow root 的内容会渲染。
</p>
</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/05/16/shadow-dom-101/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/15/css3-animation/">Css3 Animation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-15T22:28:04+08:00" pubdate data-updated="true">May 15<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/05/15/css3-animation/#disqus_thread"
             data-disqus-identifier="http://Robing.github.io/blog/2014/05/15/css3-animation/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Introduction</h3>




<p>Ladies and gentlemen, it is the second decade of the second millennium and we are still kicking around the same 2D interface we got three decades ago. Sure, Apple debuted a few apps for OSX 10.7 that have a couple more 3D flourishes, and Microsoft has had thatFlip 3Dfor a while. But c’mon, 2011 is right around the corner. That’sTwenty Elevenfolks. Where is our 3D virtual reality? By now, we should be zipping around theMetaverse in super-sonic motorbikes.</p>




<p>Granted, the capability of rendering complex 3D environments has been present for years. On the Web, there already are number of solutions –Flash,three.jsin canvas, and eventually WebGL. And finally, we meager front-end developers have our own three-dimensional jewel: CSS 3D Transforms!</p>




<h3>Rationale</h3>




<p>Like a beautiful jewel, 3D transform can be dazzling, a true spectacle to behold. But before we start tacking 3D diamonds and rubies to our compositions like Liberace’s tailor, we owe it to our users to ask what can they benefit from this awesome feature.</p>




<p>The entire application does not, and should not, take advantage of 3D. CSS was built to style documents, not generate explorable environments. I fail to find a benefit to filling out a web form that can be accessed by swiveling my viewport to the Sign-Up Room (although there have been proposals to make the Web just that). However, there is plenty of opportunity to use 3D transformsin betweenthe interface, via transitions.</p>




<p>Take for instance the Weather App on the iPhone. The application uses two views: a details view and an options view. Switching between these two views is done with a 3D flip transition. This affords the user that the interface has two and only two views, as they can only exist on either side of the same plane.</p>




</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/05/15/css3-animation/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/07/28/web-component/">Web Component</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/20/history/">浏览器的历史记录</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/03/using-web-notifications/">Using Web Notifications</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/16/shadow-dom-301/">Shadow DOM 三</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/16/shadow-dom-201/">Shadow DOM 二</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/css3/'>Css3 (1)</a></li>
<li class='category'><a href='/blog/categories/html5/'>HTML5 (6)</a></li>

  </ul>
</section><section id="tag_cloud">
  <h1>Tags</h1>
  <div class="tag-cloud">
    <a style="font-size: 210%" href="/tags/html5/">Html5</a>
<a style="font-size: 90%" href="/tags/notifications/">Notifications</a>
<a style="font-size: 90%" href="/tags/animation/">animation</a>
<a style="font-size: 90%" href="/tags/css3/">css3</a>

  </div>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Robin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rainboy';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
